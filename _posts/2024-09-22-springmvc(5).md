---
layout: single
title:  "[SPRING MVC] MVC êµ¬ì¡° ì´í•´"
categories: spring_mvc
toc: true
author_profile: false
sidebar:
    nav: "docs"
---





## ìŠ¤í”„ë§ MVC ì „ì²´ êµ¬ì¡°

**ì§ì ‘ ë§Œë“¤ì–´ ë³¸ MVC í”„ë ˆì„ì›Œí¬ êµ¬ì¡°**

<img src="{{site.url}}/images/2024-09-22-springmvc(5)/image-20240922111043156.png" alt="image-20240922111043156" style="zoom: 25%;" />

-- HTTP ìš”ì²­ ì‹œì‘ --

1. í•¸ë“¤ëŸ¬ ì¡°íšŒ(FrontController â¡ï¸ í•¸ë“¤ëŸ¬ ë§¤í•‘ ì •ë³´)
2. í•¸ë“¤ëŸ¬ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ(í•¸ë“¤ë¡œ ë§¤í•‘ ì •ë³´ì—ì„œ ì–»ì–´ì˜¨ í•¸ë“¤ëŸ¬ ì •ë³´ë¡œ FrontController â¡ï¸ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ëª©ë¡)
3. handle(handler)(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ëª©ë¡ì—ì„œ ì–»ì–´ì˜¨ ì–´ëŒ‘í„° ì •ë³´ë¡œ FrontController â¡ï¸ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°)
4. handler í˜¸ì¶œ(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° â¡ï¸ í•¸ë“¤ëŸ¬[ì»¨íŠ¸ë¡¤ëŸ¬])
5. ModelView ë°˜í™˜(í•¸ë“¤ëŸ¬ê°€ ë™ì‘í•œ ê²°ê³¼ë¥¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ ì „ë‹¬, í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° â¡ï¸ FrontController)
6. viewResolver í˜¸ì¶œ(FrontController â¡ï¸ viewResolver)
7. MyView ë°˜í™˜(viewResolver â¡ï¸ FrontController)
8. render(model) í˜¸ì¶œ(FrontController â¡ï¸ MyView, viewResolver ë¥¼ í†µí•´ì„œ ë°›ì•„ì˜¨ MyView ê°ì²´ë¥¼ í†µí•´ render í˜¸ì¶œ)

-- HTTP ì‘ë‹µ ì™„ë£Œ --

**SpringMVC êµ¬ì¡°**

<img src="{{site.url}}/images/2024-09-22-springmvc(5)/image-20240922153905800.png" alt="image-20240922153905800" style="zoom:25%;" />

-- HTTP ìš”ì²­ ì‹œì‘ --

1. í•¸ë“¤ëŸ¬ ì¡°íšŒ(DispatcherServlet â¡ï¸ í•¸ë“¤ëŸ¬ ë§¤í•‘ : í•¸ë“¤ëŸ¬ ë§¤í•‘ ëª©ë¡ì—ì„œ í•¸ë“¤ëŸ¬ë¥¼ ì¡°íšŒí•¨)
2. í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ(DispatcherServlet â¡ï¸ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ëª©ë¡ : í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ ë°›ì•„ì˜¨ í•¸ë“¤ëŸ¬ ì •ë³´ë¡œ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ëª©ë¡ì—ê°€ì„œ ì–´ëŒ‘í„° ì¡°íšŒ)
3. handle(handler)(DispatcherServlet â¡ï¸ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ëª©ë¡ì—ì„œ ë°›ì•„ì˜¨ ì–´ëŒ‘í„° ì •ë³´ë¡œ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ì˜ handle í˜¸ì¶œ)
4. handler í˜¸ì¶œ(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° â¡ï¸ í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬) : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” ì‹¤ì œ í•¸ë“¤ëŸ¬[ì»¨íŠ¸ë¡¤ëŸ¬] í˜¸ì¶œ)
5. ModelAndView ë°˜í™˜(í•¸ë“¤ëŸ¬ì˜ ì‹¤í–‰ê²°ê³¼ë¡œ ë°›ì€ ì •ë³´ë¡œ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° â¡ï¸ Dispatcher Servlet ì˜ ë£¨íŠ¸ë¡œ ModelAndView ë°˜í™˜)
6. viewResolver í˜¸ì¶œ(DispatcherServlet â¡ï¸ viewResolver)
7. View ë°˜í™˜((viewResovler â¡ï¸ Dispatcher ì— View ë°˜í™˜))
8. render(model) í˜¸ì¶œ(viewResolver ì—ì„œ ë°›ì•„ì˜¨ View ë¡œ ì‚¬ë§)

-- HTTP ì‘ë‹µ ì™„ë£Œ --

**ì§ì ‘ ë§Œë“  í”„ë ˆì„ì›Œí¬ â¡ï¸ ìŠ¤í”„ë§ MVC ë¹„êµ**

- FrontController â¡ï¸ DispatcherServlet
- handlerMappingMap â¡ï¸ HandlerMapping
- MyHandlerAdapter â¡ï¸ HandlerAdatapter
- ModelView â¡ï¸ ModelAndView
- viewResolver â¡ï¸ ViewResolver
- MyView â¡ï¸ View

### `DispatcherServlet` êµ¬ì¡° ì‚´í´ë³´ê¸°

`org.springframework.web.servlet.DispatcherServlet;`

**ğŸ”¥ í•µì‹¬ ğŸ”¥** ìŠ¤í”„ë§ MVC ì—ì„œ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ë°”ë¡œ **ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿(DispatcherServlet)**

#### DispatcherServlet ì„œë¸”ë¦¿ ë“±ë¡

**ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì˜ ë‹¤ì´ì–´ê·¸ë¨**

![DispatcherServlet]({{site.url}}/images/2024-09-22-springmvc(5)/DispatcherServlet.png)

- Dispatcher ë„ ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ HttpServlet ì„ ìƒì† ë°›ì•„ì„œ ì‚¬ìš©í•˜ê³ , ì„œë¸”ë¦¿ìœ¼ë¡œ ë™ì‘
  - DispatcherServlet â¡ï¸ FramworkServlet â¡ï¸ HttpServletBean â¡ï¸ **HttpServlet**
- ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” DispatcherServlet ì„ ì„œë¸”ë¦¿ìœ¼ë¡œ ìë™ ë“±ë¡
  - ëª¨ë“  ê²½ë¡œ(`urlPatterns="/"`)ì— ëŒ€í•´ì„œ ë§¤í•‘
  - ì°¸ê³  : ë” ìì„¸í•œ, ìƒì„¸í•œ ê²½ë¡œê°€ ìš°ì„ ìˆœìœ„ê°€ ë†’ìŒ. ê·¸ë˜ì„œ ê¸°ì¡´ì— ë“±ë¡í•œ ì„œë¸”ë¦¿ë„ í•¨ê»˜ ë™ì‘í•  ìˆ˜ ìˆëŠ” ê²ƒ

**ìš”ì²­ íë¦„**

- ì„œë¸”ë¦¿ í˜¸ì¶œ â¡ï¸ HttpServlet ì´ ì œê³µí•˜ëŠ” service() í˜¸ì¶œ
- ìŠ¤í”„ë§ MVC ëŠ” DispatcherServlet ì˜ ë¶€ëª¨ì¸ FrameworkServlet ì—ì„œ `service()` ë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•´ë‘ì—ˆìŒ

â€‹	![image-20240922161219478]({{site.url}}/images/2024-09-22-springmvc(5)/image-20240922161219478.png)

- âœ… `FrameworkServlet.service()` ë¥¼ ì‹œì‘ìœ¼ë¡œ ì—¬ëŸ¬ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ì„œ `DispatcherServlet.doDispatcher()` ê°€ í˜¸ì¶œë¨

**DispatcherServlet ì˜ í•µì‹¬ì¸ `doDispatch()` ì½”ë“œ ë¶„ì„**

```java
@SuppressWarnings("deprecation")
protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {
		HttpServletRequest processedRequest = request;
		HandlerExecutionChain mappedHandler = null;
		boolean multipartRequestParsed = false;

		WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);

		try {
			ModelAndView mv = null;
			Exception dispatchException = null;

			try {
				processedRequest = checkMultipart(request);
				multipartRequestParsed = (processedRequest != request);

				// 1. í•¸ë“¤ëŸ¬ ì¡°íšŒ
				mappedHandler = getHandler(processedRequest);
				if (mappedHandler == null) {
					noHandlerFound(processedRequest, response); // 404 ì„¸íŒ…
					return;
				}

				// 2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ - í•¸ë“¤ëŸ¬ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì–´ëŒ‘í„°
				HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler());

				// Process last-modified header, if supported by the handler.
				String method = request.getMethod();
				boolean isGet = HttpMethod.GET.matches(method);
				if (isGet || HttpMethod.HEAD.matches(method)) {
					long lastModified = ha.getLastModified(request, mappedHandler.getHandler());
					if (new ServletWebRequest(request, response).checkNotModified(lastModified) && isGet) {
						return;
					}
				}

				if (!mappedHandler.applyPreHandle(processedRequest, response)) {
					return;
				}

				// 3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰ -> 4. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ í•¸ë“¤ëŸ¬ ì‹¤í–‰ -> 5. ModelAndView ë°˜í™˜
				mv = ha.handle(processedRequest, response, mappedHandler.getHandler());

				if (asyncManager.isConcurrentHandlingStarted()) {
					return;
				}

				applyDefaultViewName(processedRequest, mv);
				mappedHandler.applyPostHandle(processedRequest, response, mv);
			}
			catch (Exception ex) {
				dispatchException = ex;
			}
			catch (Throwable err) {
				// As of 4.3, we're processing Errors thrown from handler methods as well,
				// making them available for @ExceptionHandler methods and other scenarios.
				dispatchException = new ServletException("Handler dispatch failed: " + err, err);
			}
      // render í˜¸ì¶œ
			processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);
		}
		catch (Exception ex) {
			triggerAfterCompletion(processedRequest, response, mappedHandler, ex);
		}
		catch (Throwable err) {
			triggerAfterCompletion(processedRequest, response, mappedHandler,
					new ServletException("Handler processing failed: " + err, err));
		}
		finally {
			if (asyncManager.isConcurrentHandlingStarted()) {
				// Instead of postHandle and afterCompletion
				if (mappedHandler != null) {
					mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);
				}
				asyncManager.setMultipartRequestParsed(multipartRequestParsed);
			}
			else {
				// Clean up any resources used by a multipart request.
				if (multipartRequestParsed || asyncManager.isMultipartRequestParsed()) {
					cleanupMultipart(processedRequest);
				}
			}
		}
	}
```

```java
private void processDispatchResult(HttpServletRequest request, HttpServletResponse response,
			@Nullable HandlerExecutionChain mappedHandler, @Nullable ModelAndView mv,
			@Nullable Exception exception) throws Exception {

		boolean errorView = false;

		if (exception != null) {
			if (exception instanceof ModelAndViewDefiningException mavDefiningException) {
				logger.debug("ModelAndViewDefiningException encountered", exception);
				mv = mavDefiningException.getModelAndView();
			}
			else {
				Object handler = (mappedHandler != null ? mappedHandler.getHandler() : null);
				mv = processHandlerException(request, response, handler, exception);
				errorView = (mv != null);
			}
		}

		// Did the handler return a view to render?
		if (mv != null && !mv.wasCleared()) {
      // ë·° ë Œë”ë§ í˜¸ì¶œ
			render(mv, request, response);
			if (errorView) {
				WebUtils.clearErrorRequestAttributes(request);
			}
		}
		else {
			if (logger.isTraceEnabled()) {
				logger.trace("No view rendering, null ModelAndView returned.");
			}
		}

		if (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {
			// Concurrent handling started during a forward
			return;
		}

		if (mappedHandler != null) {
			// Exception (if any) is already handled..
			mappedHandler.triggerAfterCompletion(request, response, null);
		}
	}
```

```java
	protected void render(ModelAndView mv, HttpServletRequest request, HttpServletResponse response) throws Exception {
		// Determine locale for request and apply it to the response.
		Locale locale =
				(this.localeResolver != null ? this.localeResolver.resolveLocale(request) : request.getLocale());
		response.setLocale(locale);

		View view;
		String viewName = mv.getViewName();
		if (viewName != null) {
			// 6. ë·° ë¦¬ì¡¸ë²„ë¥¼ í†µí•´ì„œ ë·° ì°¾ê¸°, 7. View ë°˜í™˜
			view = resolveViewName(viewName, mv.getModelInternal(), locale, request);
			if (view == null) {
				throw new ServletException("Could not resolve view with name '" + mv.getViewName() +
						"' in servlet with name '" + getServletName() + "'");
			}
		}
		else {
			// No need to lookup: the ModelAndView object contains the actual View object.
			view = mv.getView();
			if (view == null) {
				throw new ServletException("ModelAndView [" + mv + "] neither contains a view name nor a " +
						"View object in servlet with name '" + getServletName() + "'");
			}
		}

		// Delegate to the View object for rendering.
		if (logger.isTraceEnabled()) {
			logger.trace("Rendering view [" + view + "] ");
		}
		try {
			if (mv.getStatus() != null) {
				request.setAttribute(View.RESPONSE_STATUS_ATTRIBUTE, mv.getStatus());
				response.setStatus(mv.getStatus().value());
			}
      // 8. ë·° ë Œë”ë§
			view.render(mv.getModelInternal(), request, response);
		}
		catch (Exception ex) {
			if (logger.isDebugEnabled()) {
				logger.debug("Error rendering view [" + view + "]", ex);
			}
			throw ex;
		}
	}
```

> í´ë˜ìŠ¤ ë“¤ì–´ê°€ì„œ í™•ì¸í•´ë³´ë‹ˆê¹Œ, doDispatch í•¨ìˆ˜ë¥¼ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²ƒì´ë¼ëŠ” ê²½ê³ ê°€ ìˆë‹¤..!
>
> ![image2]({{site.url}}/images/2024-09-22-springmvc(5)/image2.png)
>
> 

**ë™ì‘ ìˆœì„œ**

1. í•¸ë“¤ëŸ¬ ì¡°íšŒ : í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ ìš”ì²­ URL ì— ë§¤í•‘ëœ í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬)ë¥¼ ì¡°íšŒí•œë‹¤.
2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ : í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì¡°íšŒí•œë‹¤.
3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰ : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì‹¤í–‰í•œë‹¤.
4. í•¸ë“¤ëŸ¬ ì‹¤í–‰ : í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ ì‹¤ì œ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•œë‹¤.
5. ModelAndView ë°˜í™˜ :  í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ” í•¸ë“¤ëŸ¬ê°€ ë°˜í™˜í•˜ëŠ” ì •ë³´ë¥¼ ModelAndView ë¡œ ë³€í™˜í•´ì„œ ë°˜í™˜í•œë‹¤.
6. viewResolver í˜¸ì¶œ : ë·° ë¦¬ì¡¸ë²„ë¥¼ ì°¾ê³  ì‹¤í–‰í•œë‹¤.
   - JSP ì˜ ê²½ìš° : InternalResourceViewResolver ê°€ ìë™ ë“±ë¡ë˜ê³  ì‚¬ìš©ëœë‹¤.
7. View ë°˜í™˜ : ë·° ë¦¬ì¡¸ë²„ëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë¬¼ë¦¬ ì´ë¦„ìœ¼ë¡œ ë°”ê¾¸ê³ , ë Œë”ë§ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” ë·° ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
   - JSP ì˜ ê²½ìš° : InternalResourceView(JstView) ë¥¼ ë°˜í™˜í•˜ëŠ”ë°, ë‚´ë¶€ì— `forward()` ë¡œì§ì´ ìˆë‹¤.
8. ë·° ë Œë”ë§ : ë·°ë¥¼ í†µí•´ì„œ ë·°ë¥¼ ë Œë”ë§ í•œë‹¤.

**ì¸í„°í˜ì´ìŠ¤ ì‚´í´ë³´ê¸°**

- ìŠ¤í”„ë§ MVC ì˜ í° ê°•ì  : DispatcherServlet ì½”ë“œ ë³€ê²½ ì—…ì‹±, ì›í•˜ëŠ” ê¸°ëŠ¥ ë³€ê²½/í™•ì¥ ê°€ëŠ¥
- ì¸í„°í˜ì´ìŠ¤ë“¤ë¡œë§Œ êµ¬í˜„í•´ì„œ DispatcherServlet ì— ë“±ë¡í•˜ë©´ ììœ ë¡­ê²Œ ì»¨íŠ¸ë¡¤ëŸ¬ ë§Œë“¤ê¸° ê°€ëŠ¥

**ì£¼ìš” ì¸í„°í˜ì´ìŠ¤ ëª©ë¡**

- í•¸ë“¤ëŸ¬ ë§¤í•‘ : `org.springframework.web.servlet.HandlerMapping`
- í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° : `org.springframework.web.servlet.HandlerAdapter`
- ë·° ë¦¬ì¡¸ë²„ : `org.springframework.web.servlet.ViewResolver`
- ë·° : `org.springframework.web.servlet.View`



## í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°

### Controller ì¸í„°í˜ì´ìŠ¤

**ê³¼ê±° ë²„ì „ ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬**

org.springframework.web.servlet.mvc.Controller

```java
public interface Controller {
		
		ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception;
		
}
```

![image-20240922164719550]({{site.url}}/images/2024-09-22-springmvc(5)/image-20240922164719550.png)

- ì²˜ìŒì—ëŠ” ì´ëŸ° ê³ ì •ëœ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œê³µí–ˆë‹¤.
- (ì°¸ê³ ) Controller ì¸í„°í˜ì´ìŠ¤ëŠ” @Controller ì• ë…¸í…Œì´ì…˜ê³¼ ì „í˜€ ë‹¤ë¦„



**OldController**

```java
package hello.servlet.web.servletmvc.old;

import hello.servlet.web.servlet.mvc.Controller;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Component;
import org.springframework.web.servlet.ModelAndView;

@Component("/springmvc/old-controller")
public class OldController implements Controller {
    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        System.out.println("OldController.handleRequest"); // í˜¸ì¶œë˜ëŠ”ì§€ë§Œ í™•ì¸
        return null;
    }
}
```

- `@Component` : ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ `/springmvc/old-controller` ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡
- **ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ URL ë§¤í•‘í•˜ëŠ” ê²ƒ**



ğŸ§ ì´ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì–´ë–»ê²Œ í˜¸ì¶œë  ìˆ˜ ìˆì„ê¹Œ?

- HandlerMapping(í•¸ë“¤ëŸ¬ ë§¤í•‘)
  - í•¸ë“¤ëŸ¬ ë§¤í•‘ì—ì„œ ì´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
  - ì˜ˆ) ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ì´ í•„ìš”í•˜ë‹¤.
- HandlerAdapter(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°)
  - í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ì„œ ì°¾ì€ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•„ìš”
  - ì˜ˆ) Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ê³  ì‹¤í–‰í•´ì•¼ í•¨



##### ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°(ëŒ€í‘œì ì¸ ê²ƒë“¤)

HandlerMapping

| ìš°ì„ ìˆœìœ„ | í´ë˜ìŠ¤ ì´ë¦„                  | ì„¤ëª…                                                   |
| -------- | ---------------------------- | ------------------------------------------------------ |
| 0        | RequestMappingHandlerMapping | ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMapping ì—ì„œ ì‚¬ìš© |
| 1        | BeanNameUrlHandlerMapping    | ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.                  |

HandlerAdapter

| ìš°ì„ ìˆœìœ„ | í´ë˜ìŠ¤ ì´ë¦„                    | ì„¤ëª…                                                   |
| -------- | ------------------------------ | ------------------------------------------------------ |
| 0        | RequestMappingHandlerAdapter   | ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMapping ì—ì„œ ì‚¬ìš© |
| 1        | HttpRequestHandlerAdapter      | HttpRequestHandler ì²˜ë¦¬                                |
| 2        | SimpleControllerHandlerAdapter | Controller ì¸í„°í˜ì´ìŠ¤(ì• ë…¸í…Œì´ì…˜X, ê³¼ê±°ì— ì‚¬ìš©) ì²˜ë¦¬   |



- í•¸ë“¤ëŸ¬ ë§¤í•‘ë„, í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë„ ìš°ì„  ìˆœìœ„ì— ë”°ë¼ ì°¨ë¡€ë¡œ ì°¾ëŠ”ë‹¤.



1. í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ

   :one: HandlerMapping ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ, í•¸ë“¤ëŸ¬ ì°¾ê¸°

   :two: ì´ ê²½ìš° ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¦„ ê·¸ëŒ€ë¡œ ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì£¼ëŠ” `BeanNameUrlHandlerMapping` ì´ ì‹¤í–‰ì— ì„±ê³µí•˜ê³  í•¸ë“¤ëŸ¬ì¸ OldController ë¥¼ ë°˜í™˜í•œë‹¤.

2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ

   :one: HandlerApdater ì˜ supports() ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤.

   :two: `SimpleControllerHandlerAdapter` ê°€ Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ëœë‹¤.

3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰

   :one: ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ì¡°íšŒí•œ SimpleControllerHandlerAdapter ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤€ë‹¤.

   :two: SimpleControllerHandlerAdapter ëŠ” í•¸ë“¤ëŸ¬ì¸ OldController ë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜



### HttpRequestHandler

- HttpRequestHandler ëŠ” ì„œë¸”ë¦¿ê³¼ ê°€ì¥ ìœ ì‚¬í•œ í˜•íƒœì˜ í•¸ë“¤ëŸ¬(ì»¨íŠ¸ë¡¤ëŸ¬)

**HttpRequestHandler**

![image-20240922173013442]({{site.url}}/images/2024-09-22-springmvc(5)/image-20240922173013442.png)



**MyHttpRequestHandler**

```java
package hello.servlet.web.servletmvc.old;

import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Component;
import org.springframework.web.HttpRequestHandler;

import java.io.IOException;

@Component("/springmvc/request-handler")
public class MyHttpRequestHandler implements HttpRequestHandler {
    @Override
    public void handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("MyHttpRequestHandler.handleRequest");
    }
}
```



1. í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ

   :one: HandlerMapping ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ, í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.

   :two: ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¦„ ê·¸ëŒ€ë¡œ ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì£¼ëŠ” `BeanNameUrlHandlerMapping` ê°€ ì‹¤í–‰ì— ì„±ê³µì„ í•˜ê³  í•¸ë“¤ëŸ¬ì¸ MyHttpRequestHandler ë¥¼ ë°˜í™˜

2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ

   :one: HandlerAdapter ì˜ supports() ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œ

   :two: HttpRequestHandlerAdapter ê°€ HttpRequestHandler ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ë¨

3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰

   :one: ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ì¡°íšŒí•œ HttpRequestHandlerAdapter ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤Œ

   â€‹	- ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì—ì„œ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°.handle ì‹¤í–‰

   :two: HttpRequestHandlerAdapter ëŠ” í•¸ë“¤ëŸ¬ì¸ MyHttpRequestHandler ë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜

   â€‹	- handle ë¡œì§ ë‚´ë¶€ì—ì„œ handler.handleRequest í˜¸ì¶œ

@RequestMapping(99.9% ì´ ë°©ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ì‚¬ìš©)

- ê°€ì¥ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ëŠ”

  `RequestMappingHandlerMapping` : ì• ë…¸í…Œì´ì…˜ì— ìˆëŠ” ë©”íƒ€ URL ì •ë³´ë¡œ í•¸ë“¤ëŸ¬ ì°¾ì•„ì£¼ëŠ” ê²ƒ

  `RequestMappingHandlerAdapter` : @RequestMapping ì„ ì²˜ë¦¬í•˜ëŠ” ì „ìš© í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡´ì¬(ê¸°ëŠ¥ì´ ë§¤ìš° ë§ìŒ)



## ë·° ë¦¬ì¡¸ë²„



**OldController - View ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ë³€ê²½**

```java
package hello.servlet.web.servletmvc.old;

import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Component;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.Controller;

@Component("/springmvc/old-controller")
public class OldController implements Controller {
    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        System.out.println("OldController.handleRequest");
        return new ModelAndView("new-form");
    }
}
```

- View ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë‹¤ìŒ ì½”ë“œ ì¶”ê°€ : `return new ModelAndView("new-form");`



ì‹¤í–‰

- ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì •ìƒ í˜¸ì¶œë˜ì§€ë§Œ, ë·°ë¥¼ ëª» ì°¾ì•˜ë‹¤ëŠ” Whitelabel Error Page ì˜¤ë¥˜ ë°œìƒ



application.properties

```properties
spring.mvc.view.prefix=/WEB-INF/views/
spring.mvc.view.suffix=.jsp
```



ë·° ë¦¬ì¡¸ë²„ - InternalResourceViewResolver

- ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” InternalResourceViewResolver ë¼ëŠ” ë·° ë¦¬ì¡¸ë²„ë¥¼ ìë™ìœ¼ë¡œ ë“±ë¡í•˜ëŠ”ë°, ì´ë•Œ application.properties ì— ë“±ë¡í•œ `spring.mvc.view.prefix`, `spring.mvc.view.suffix` ì„¤ì • ì •ë³´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë“±ë¡

```java
@Bean
InternalResourceViewResolver internalResourceViewResolver() {
		return new InternalResourceViewResolver("/WEB-INF/views/", ".jsp");
}
```

- ì´ë ‡ê²Œ ë“±ë¡í•´ì£¼ëŠ” ê²ƒ!



#### ë·° ë¦¬ì¡¸ë²„ ë™ì‘ ë°©ì‹

**ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” ë·° ë¦¬ì¡¸ë²„(ëŒ€í‘œì )**

| ìš°ì„ ìˆœìœ„ | í´ë˜ìŠ¤ ì´ë¦„                  | ì„¤ëª…                                 |
| -------- | ---------------------------- | ------------------------------------ |
| 0        | BeanNAmeViewResolver         | ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë·°ë¥¼ ì°¾ì•„ì„œ ë°˜í™˜í•œë‹¤.    |
| 1        | InternalResourceViewResolver | JSP ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë·°ë¥¼ ë°˜í™˜í•œë‹¤. |



1. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° í˜¸ì¶œ
   - í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ í†µí•´ new-form ì´ë¼ëŠ” ë…¼ë¦¬ ë·°ì´ë¦„ íšë“
2. ViewResolver í˜¸ì¶œ
   - new-form ì´ë¼ëŠ” ë·° ì´ë¦„ìœ¼ë¡œ viewResolver ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œ
   - BeanNameViewResolver ëŠ” new-form ì´ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ë·°ë¥¼ ì°¾ì•„ì•¼ í•˜ëŠ”ë° ì—†ìŒ
   - InternalResourceViewResolver ê°€ í˜¸ì¶œ
3. InternalResourceViewResolver
   - ë·° ë¦¬ì¡¸ë²„ëŠ” InternalResourceView ë¥¼ ë°˜í™˜(ë·° ë¦¬ì¡¸ë²„ì²˜ëŸ¼ MyView ê°™ì€ ê±° ë¦¬í„´í•˜ëŠ” ê²ƒ)
4. ë·° - InternalResourceView(MyView ë‘ ìœ ì‚¬í•œ ì—­í• ) :arrow_right: InternalResourceViewResolver
   - InternalResourceView ëŠ” JSP ì²˜ëŸ¼ í¬ì›Œë“œ forward() ë¥¼ í˜¸ì¶œí•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©
5. view.render()
   - view.render() ê°€ í˜¸ì¶œ, InternalResourceView ëŠ” forward() ì‚¬ìš©í•˜ì—¬ JSP ì‹¤í–‰



## ìŠ¤í”„ë§ MVC



#### [ì‹œì‘] @RequestMapping

í•„ìš”í•œ í´ë˜ìŠ¤

- RequestMappingHandlerMapping
- RequestMappingHandlerAdapter



:running: ì´ì „ì— ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì„ `@RequestMapping`  ê¸°ë°˜ì˜ ìŠ¤í”„ë§ MVC ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ë³€ê²½í•´ë³´ì!



**SpringMemberFormControllerV1 - íšŒì› ë“±ë¡ í¼**

```java
package hello.servlet.web.servletmvc.v1;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class SpringMemberFormControllerV1 {

    @RequestMapping("/springmvc/v1/members/new-form")
    public ModelAndView process() {
        return new ModelAndView("new-form");
    }
    
}

```

- `@Controller` :arrow_right: 2ê°€ì§€ ì—­í• (ComponentScan ì˜ ëŒ€ìƒì´ ë˜ê³ , RequestMappingHandlerMapping ì— ì‚¬ìš©)

  - ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ (ë‚´ë¶€ì— @Component ì• ë…¸í…Œì´ì…˜ì´ ìˆì–´ì„œ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì˜ ëŒ€ìƒì´ ë¨)

  - ìŠ¤í”„ë§ MVC ì—ì„œ ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì¸ì‹

    :arrow_right: RequestMappingHandlerMapping ì—ì„œ í•¸ë“¤ëŸ¬ ì •ë³´êµ¬ë‚˜ í•˜ê³  êº¼ë‚¼ ìˆ˜ ìˆëŠ” ê³ ë ¤ ëŒ€ìƒì´ ë˜ëŠ” ê²ƒ

- `@RequestMapping`

  - ìš”ì²­ ì •ë³´ë¥¼ ë§¤í•‘í•¨. í•´ë‹¹ URL ì´ í˜¸ì¶œë˜ë©´ ì´ ë©”ì„œë“œê°€ í˜¸ì¶œë¨
  - ì• ë…¸í…Œì´ì…˜ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì—, ë©”ì„œë“œì˜ ì´ë¦„ì€ ì„ì˜ë¡œ ì§€ìœ¼ë©´ ë¨

- `@ModelAndView`

  - ëª¨ë¸ê³¼ ë·° ì •ë³´ë¥¼ ë‹´ì•„ì„œ ë°˜í™˜í•˜ë©´ ëœë‹¤.



**`RequestMappingHandlerMapping` ì€ ìŠ¤í”„ë§ ë¹ˆ ì¤‘ì—ì„œ ~~`@RequestMapping` ë˜ëŠ”~~ `@Controller` ê°€ í´ë˜ìŠ¤ ë ˆë²¨(í´ë˜ìŠ¤ ìœ„ì—)ì— ë¶™ì–´ ìˆëŠ” ê²½ìš° ë§¤í•‘ ì •ë³´ë¡œ ì¸ì‹**

- ì£¼ì˜) ìŠ¤í”„ë§ ë¶€íŠ¸ 3.0 ë¶€í„°ëŠ” í´ë˜ìŠ¤ ë ˆë²¨ì— @RequestMapping ì´ ìˆì–´ë„ ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì¸ì‹í•˜ì§€ ì•ŠìŒ. @Controller ê°€ ìˆì–´ì•¼ë§Œ ì¸ì‹



**SpringMemberSaveControllerV1 - íšŒì› ì €ì¥**

```java
package hello.servlet.web.servletmvc.v1;

import hello.servlet.domain.member.Member;
import hello.servlet.domain.member.MemberRepository;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class SpringMemberSaveControllerV1 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @RequestMapping("/springmvc/v1/members/save")
    public ModelAndView process(HttpServletRequest request, HttpServletResponse response) {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        System.out.println("member = " + member);
        memberRepository.save(member);

        ModelAndView mv = new ModelAndView("save-result");
        mv.addObject("member", member);
        return mv;
    }
    
}
```

- mv.addObject("member", member)
  - ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ModelAndView ë¥¼ í†µí•´ Model ë°ì´í„°ë¥¼ ì¶”ê°€í•  ë•ŒëŠ” addObject() ì‚¬ìš©
  - ì´ë ‡ê²Œ ë„˜ì–´ê°„ ë°ì´í„°ëŠ” ë·°ë¥¼ ë Œë”ë§ í•  ë•Œ ì‚¬ìš©



**SpringMemberListControllerV1 - íšŒì› ëª©ë¡**

```java
package hello.servlet.web.servletmvc.v1;

import hello.servlet.domain.member.Member;
import hello.servlet.domain.member.MemberRepository;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import java.util.List;

@Controller
public class SpringMemberListControllerV1 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @RequestMapping("/springmvc/v1/members")
    public ModelAndView process() {

        List<Member> members = memberRepository.findAll();

        ModelAndView mv = new ModelAndView("members");
        mv.addObject("members", members);

        return mv;
        
    }
}
```



> í•µì‹¬
>
> @Controller ê°€ í´ë˜ìŠ¤ ë ˆë²¨ì— ìˆìœ¼ë©´, 
> RequestMappingHandlerMapping ì´ ë‚´ê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì• ì•¼! í•˜ê³  í•¸ë“¤ëŸ¬ êº¼ë‚´ì£¼ê³ , 
> RequestMappingHandlerAdapter ê°€ HandlerMapping ì´ êº¼ë‚´ì¤€ handler ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì²˜ë¦¬í•´ì¤Œ!



#### ì»¨íŠ¸ë¡¤ëŸ¬ í†µí•©

- `@RequestMapping` ì„ ë³´ë©´ í´ë˜ìŠ¤ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ ë©”ì„œë“œ ë‹¨ìœ„ì— ì ìš©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ
  - ìœ ì—°í•˜ê²Œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ë¥¼ ìœ ì—°í•˜ê²Œ í•˜ë‚˜ë¡œ í†µí•© ê°€ëŠ¥



**SpringMemberControllerV2**

```java
package hello.servlet.web.servletmvc.v2;

import hello.servlet.domain.member.Member;
import hello.servlet.domain.member.MemberRepository;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import java.util.List;

/**
 * í´ë˜ìŠ¤ ë‹¨ìœ„ -> ë©”ì„œë“œ ë‹¨ìœ„
 * @RequestMapping í´ë˜ìŠ¤ ë ˆë²¨ê³¼ ë©”ì„œë“œ ë ˆë²¨ ì¡°í•©
 */
@Controller
@RequestMapping("/springmvc/v2/members")
public class SpringMemberControllerV2 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @RequestMapping("/new-form")
    public ModelAndView newForm() {
        return new ModelAndView("new-form");
    }

    @RequestMapping("/save")
    public ModelAndView save(HttpServletRequest request, HttpServletResponse response) {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        ModelAndView mv = new ModelAndView("save-result");
        mv.addObject("member", member);

        return mv;

    }

    @RequestMapping
    public ModelAndView members() {

        List<Member> members = memberRepository.findAll();

        ModelAndView mv = new ModelAndView("members");
        mv.addObject("members", members);

        return mv;
        
    }
}
```

- ì¡°í•©ìœ¼ë¡œ `/springmvc/v2/members` ì¤‘ë³µ ì œê±°

â€‹	í´ë˜ìŠ¤ ë ˆë²¨ `@RequestMapping("/springmvc/v2/members")`

â€‹	ë©”ì„œë“œ ë ˆë²¨ `@RequestMapping("/new-form")`

â€‹	ë©”ì„œë“œ ë ˆë²¨ `@RequestMapping("/save")`

â€‹	ë©”ì„œë“œ ë ˆë²¨ `@RequestMapping`



#### ì‹¤ìš©ì ì¸ ë°©ì‹(ì‹¤ë¬´ì—ì„œ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹)



**SpringMemberControllerV3**

```java
package hello.servlet.web.servletmvc.v3;

import hello.servlet.domain.member.Member;
import hello.servlet.domain.member.MemberRepository;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;

import java.util.List;

/**
 * Model ë„ì…
 * ViewName ì§ì ‘ ë°˜í™˜
 * @RequestParam ì‚¬ìš©
 * @RequestMapping -> @GetMapping, @PostMapping
 */
@Controller
@RequestMapping("/springmvc/v3/members")
public class SpringMemberControllerV3 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @GetMapping("/new-form")
    public String newForm() {
      	// Spring annotation ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” modelAndView ë¥¼ ë°˜í™˜í•´ë„ ë˜ê³ , ë¬¸ìë¥¼ ë°˜í™˜í•´ë„ ë¨
      	// ê·¸ëŸ¼ ê·¸ëƒ¥ view ì´ë¦„ ì•Œê³  V4 ì²˜ëŸ¼ í”„ë¡œì„¸ìŠ¤ ì§„í–‰ë¨
        return "new-form";
    }

    @PostMapping("/save")
    public String save(@RequestParam("username") String username, @RequestParam("age") int age, Model model) { // @RequestParam("age") íƒ€ì… ìºìŠ¤íŒ…ë„ ë‹¤. ã…£ì›
        Member member = new Member(username, age);
        memberRepository.save(member);

        model.addAttribute("member", member);
        return "save-result";
    }

    @GetMapping
    public String members(Model model) {

        List<Member> members = memberRepository.findAll();

        model.addAttribute("members", members);
        return "members";
    }
}

```

- **ViewName ì§ì ‘ ë°˜í™˜(ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ ë°˜í™˜)**

- **@RequestParam ì‚¬ìš©**(ë¬¼ë¡ , GET ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì™€ POST Form ë°©ì‹ ëª¨ë‘ ì§€ì›)

  - ìŠ¤í”„ë§ì€ HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ @RequestParam ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.
  - request.getParameter ì™€ ê±°ì˜ ê°™ì€ ì½”ë“œë¼ê³  ìƒê° ã…‡ã…‡

- **@RequestMapping -> @GetMapping, @PostMapping**

  - URL ë§Œ ë§¤ì¹­í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ HTTP Mothod ë„ í•¨ê»˜ êµ¬ë¶„ ê°€ëŠ¥
  - URL ì´ new-form ì´ê³ , HTTP Mothod ê°€ GET ì¸ ê²½ìš°ë¥¼ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” ë§¤í•‘ì„ í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬

  ``` java
  @RequstMapping(value = "/new-form", method = RequestMethod.GET)
  ```


@GetMapping ë‚´ë¶€ì— @RequestMapping ë¥¼ ê°€ì§€ê³  ìˆëŠ” ëª¨ìŠµ

![image]({{site.url}}/images/2024-09-22-springmvc(5)/image.png)

---
ì¶œì²˜ : https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1