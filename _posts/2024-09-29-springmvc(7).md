---
layout: single
title:  "[SPRING MVC] ì›¹ í˜ì´ì§€ ë§Œë“¤ê¸°"
categories: spring_mvc
toc: true
author_profile: false
sidebar:
    nav: "docs"
---

## Welcome í˜ì´ì§€ ì¶”ê°€

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<ul>
    <li>ìƒí’ˆ ê´€ë¦¬
        <ul>
            <li><a href="/basic/items">ìƒí’ˆ ê´€ë¦¬ - ê¸°ë³¸</a></li>
        </ul>
    </li>
</ul>
</body>
</html>
```



## ìš”êµ¬ì‚¬í•­ ë¶„ì„

- ìƒí’ˆ ê´€ë¦¬ ì„œë¹„ìŠ¤

ìƒí’ˆ ë„ë©”ì¸ ëª¨ë¸

- ìƒí’ˆ ID
- ìƒí’ˆëª…
- ê°€ê²©
- ìˆ˜ëŸ‰

ìƒí’ˆ ê´€ë¦¬ ê¸°ëŠ¥

- ìƒí’ˆ ëª©ë¡
- ìƒí’ˆ ìƒì„¸
- ìƒí’ˆ ë“±ë¡

**ì„œë¹„ìŠ¤ ì œê³µ íë¦„**

![image-20240929233254774]({{site.url}}/images/2024-09-29-springmvc(7)/image-20240929233254774.png)

1. Client ê°€ ìƒí’ˆ ëª©ë¡ì— ë“¤ì–´ê°€ë©´ ìƒí’ˆ ëª©ë¡ Controller ì— ë“¤ì–´ê°€ì„œ, Controller ê°€ View ë¡œ ê°€ì„œ ìƒí’ˆ ëª©ë¡ View ë Œë”ë§
2. View ì˜ ìƒí’ˆ ëª©ë¡ì—ì„œ ìƒí’ˆ ë“±ë¡ í¼ìœ¼ë¡œ ì´ë™ ê°€ëŠ¥
   - ê·¸ëŸ¼ ìƒí’ˆ ë“±ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë·°ë¡œ ë³´ì—¬ì¤Œ
3. ìƒí’ˆ ì •ë³´ ì…ë ¥í•˜ê³  ë“±ë¡ ëˆ„ë¥´ë©´ ìƒí’ˆ ì €ì¥ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì´ë™
4. ìƒí’ˆ ì €ì¥ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ìƒí’ˆ ìƒì„¸ë¡œ ì´ë™(ìƒí’ˆ ìƒì„¸ ë·°ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒ)
5. ìƒí’ˆ ëª©ë¡ -> ìƒí’ˆ ìƒì„¸
6. ìƒí’ˆ ìƒì„¸ì—ì„œ ìƒí’ˆ ìˆ˜ì • í¼ìœ¼ë¡œ ì´ë™

ë°±ì—”ë“œ ê°œë°œì : ë””ìì´ë„ˆ, ì›¹ í¼ë¸”ë¦¬ì…”ë¥¼ í†µí•´ì„œ HTML í™”ë©´ì´ ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ ì‹œìŠ¤í…œì„ ì„¤ê³„í•˜ê³ , í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸ì„ ê°œë°œ, HTML ì´ ë‚˜ì˜¤ë©´ HTML ì„ ë·° í…œí”Œë¦¿ìœ¼ë¡œ ë³€í™˜í•´ì„œ ë™ì ìœ¼ë¡œ í™”ë©´ì„ ê·¸ë¦¬ê³ , ì›¹ í™”ë©´ì˜ íë¦„ ì œì–´

(í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ì—†ì´ ë°±ì—”ë“œì—ì„œë§Œ ë Œë”ë§í•  ë•Œ)

(ë°±ì—”ë“œ ê°œë°œìê°€ ì´ë ‡ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°ë„ ìˆìœ¼ë¯€ë¡œ ë·°í…œí”Œë¦¿ì„ ì•Œì•„ë†”ì•¼ í•¨)



## ìƒí’ˆ ë„ë©”ì¸ ê°œë°œ

### Item - ìƒí’ˆ ê°ì²´

```java
package hello.itemservice.domain.item;


import lombok.Data;

@Data
public class Item {

    private Long id;
    private String itemName;
    private Integer price;
    private Integer quantity;

    public Item() {
    }

    public Item(String itemName, Integer price, Integer quantity) {
        this.itemName = itemName;
        this.price = price;
        this.quantity = quantity;
    }
}

```

- `@Data`

  : ì´ê²Œ êµ‰ì¥íˆ ìœ„í—˜í•¨. Getter/Setter ì •ë„ë§Œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ìŒ

  : í•µì‹¬ ë„ë©”ì¸ì— ì‚¬ìš©í•˜ê¸° ìœ„í—˜(ì˜ˆì¸¡í•˜ì§€ ëª»í•˜ê²Œ ë™ì‘í•  ìˆ˜ ìˆìŒ)

  : DTO ì²˜ëŸ¼ ë‹¨ìˆœí•˜ê²Œ ê°’ì„ ì™”ë‹¤ê°”ë‹¤ í•  ë•ŒëŠ” ì‚¬ìš©í•´ë„ ê´œì°®ìŒ

- int ê°€ ì•„ë‹Œ Integer ë¥¼ ì‚¬ìš©í•œ ì´ìœ 

  : ê°’ì´ 'ì•ˆ ë“¤ì–´ê°ˆ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸' (int ì™€ ê°™ì€ í”„ë¦¬ë¯¸í‹°ë¸Œ íƒ€ì…ì€ null ê°’ì´ í• ë‹¹ì´ ì•ˆë¨)



### ItemRepository - ìƒí’ˆ ì €ì¥ì†Œ

```java
package hello.itemservice.domain.item;

import org.springframework.stereotype.Repository;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@Repository
public class ItemRepository {

    private static final Map<Long, Item> store = new HashMap<>(); // static ì‚¬ìš©
    private static long sequence = 0L; // static ì‚¬ìš©

    public Item save(Item item) {
        item.setId(++sequence);
        store.put(item.getId(), item);
        return item;
    }

    public Item findById(Long id) {
        return store.get(id);
    }

    public List<Item> findAll() {
        return new ArrayList<>(store.values());
    }

    public void update(Long itemId, Item updateParam) {
        Item findItem = findById(itemId);
        findItem.setItemName(updateParam.getItemName());
        findItem.setPrice(updateParam.getPrice());
        findItem.setQuantity(updateParam.getQuantity());
    }

    public void clearStore() {
        store.clear();
    }
}

```

- `private static final Map<Long, Item> store = new HashMap<>(); // static ì‚¬ìš©`

  - ì•„ì´í…œ ì €ì¥ì†Œ
  - ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë™ì‹œì— ì ‘ê·¼í•˜ëŠ” ê²½ìš°ì—ëŠ” hashMap ì‚¬ìš©í•˜ë©´ ì•ˆë¨
  - ì‹±ê¸€í†¤ìœ¼ë¡œ, static ìœ¼ë¡œ ë˜ì–´ ìˆëŠ”ë° ë™ì‹œì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì ‘ê·¼í•  ë•ŒëŠ” ConcurrentHashMap ì‚¬ìš©í•´ì•¼ í•¨

  **HashMap VS ConcurrentHashMap**

   	1. ë™ê¸°í™”(Synchronization)
   	 - HashMap : ê¸°ë³¸ì ìœ¼ë¡œ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ. ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— HashMap ì— ì ‘ê·¼í•˜ê³  ìˆ˜ì •í•  ê²½ìš°, ë°ì´í„° ë¬´ê²°ì„±ì´ ë³´ì¥ë˜ì§€ ì•ŠìŒ
   	 - ConcurrentHashMap : ë‚´ë¶€ì ìœ¼ë¡œ ë™ê¸°í™”ë˜ì–´ ìˆìŒ. ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì•ˆì „í•˜ê²Œ ë™ì‹œì— ì ‘ê·¼í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„. ì„±ëŠ¥ì„ ìœ ì§€í•˜ë©´ì„œë„ ë°ì´í„° ë¬´ê²°ì„±ì„ ë³´ì¥
   	2. ì„±ëŠ¥(Performance)
   	 - HashMap : ë™ê¸°í™”ê°€ í•„ìš” ì—†ê¸° ë•Œë¬¸ì— ë‹¨ì¼ ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë” ë¹ ë¥¸ ì„±ëŠ¥ì„ ë³´ì„. í•˜ì§€ë§Œ ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì„±ëŠ¥ ì €í•˜ ë°œìƒ ê°€ëŠ¥
   	 - ConcurrentHashMap : ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì–´ ìˆì–´ ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì„±ëŠ¥ì„ ì˜ ìœ ì§€í•¨. ë‚´ë¶€ì ìœ¼ë¡œ ì—¬ëŸ¬ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë‚˜ëˆ„ì–´ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì„±ëŠ¥ì„ ê·¹ëŒ€í™”
   	3. Null í‚¤ì™€ ê°’
   	 - HashMap : í•˜ë‚˜ì˜ null í‚¤ì™€ ì—¬ëŸ¬ ê°œì˜ null ê°’ì„ í—ˆìš©
   	 - ConcurrentHashMap : null í‚¤ì™€ null ê°’ í—ˆìš© X, ë™ê¸°í™” ê³¼ì •ì—ì„œì˜ ë³µì¡ì„±ì„ ì¤„ì´ê¸° ìœ„í•´ ì„¤ê³„ëœ ê²ƒ
   	4. Iteration
   	 - HashMap : ë°˜ë³µ(iteration) ê³¼ì •ì—ì„œ ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ì´ë£¨ì–´ì§€ë©´, ConcurrentModificationExcpetion ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ
   	 - ConcurrentHashMap : ë°˜ë³µ ê³¼ì •ì—ì„œ ì•ˆì „í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥, ìŠ¤ëƒ…ìƒ·ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ë°˜ë³µ ì§€ì›, ë³€ê²½ ì¤‘ì— ì•ˆì „í•˜ê²Œ ë°ì´í„° ì½ì„ ìˆ˜ ìˆìŒ
   	5. ë©”ì„œë“œ
   	 - HashMap : ê¸°ë³¸ì ì¸ ë©”ì„œë“œì¸ put(), get(), remove() ë“±ì´ ì œê³µ
   	 - ConcurrentHashMap : ì¶”ê°€ì ìœ¼ë¡œ putIfAbsent(), remove(), replace() ë“±ì˜ ë©”ì„œë“œë¥¼ ì œê³µí•˜ì—¬, ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œì˜ ì•ˆì „í•œ ì‘ì—… ì§€ì›

  **ConcurrentHashMap ì´ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë°ì´í„°ì˜ ì•ˆì „ì„±ì„ ë³´ì¥í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜**

  1. ì„¸ê·¸ë©˜í…Œì´ì…˜(Segmentation)
     - ConcurrentHashMap ì€ ë‚´ë¶€ì ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë‚˜ëˆ ì§. ê° ì„¸ê·¸ë¨¼íŠ¸ëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ê¸°í™”ë˜ë¯€ë¡œ, í•˜ë‚˜ì˜ ì„¸ê·¸ë¨¼íŠ¸ì— ëŒ€í•œ ì‘ì—…ì´ ë‹¤ë¥¸ ì„¸ê·¸ë¨¼íŠ¸ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŒ
     - ì´ë¥¼ í†µí•´ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ë‹¤ë¥¸ ì„¸ê·¸ë¨¼íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆì–´ ì„±ëŠ¥ì´ í–¥ìƒ
  2. Lock-Free Reads
     - **get() ë©”ì„œë“œëŠ” ë½ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ê°’ì„ ì½ì„ ìˆ˜ ìˆìŒ**
     - ì´ëŠ” ì½ê¸° ì‘ì—…ì´ ë¹ˆë²ˆí•œ ê²½ìš°ì— ì„±ëŠ¥ì„ ê·¹ëŒ€í™”í•˜ëŠ” ë° ê¸°ì—¬
     - ë‚´ë¶€ì ìœ¼ë¡œëŠ” volatile ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœì‹  ê°’ì„ ë³´ì¥
  3. Find-Grained Locking
     - ì“°ê¸° ì‘ì—…(put(), remove(), replace() ë“±)ì— ëŒ€í•´ì„œëŠ” ì„¸ê·¸ë¨¼íŠ¸ ë‹¨ìœ„ë¡œ ë½ ì‚¬ìš©
     - íŠ¹ì • ì„¸ê·¸ë¨¼íŠ¸ì— ëŒ€í•œ ì‘ì—…ì´ ì§„í–‰ë˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì„¸ê·¸ë¨¼íŠ¸ëŠ” ì˜í–¥ì„ ë°›ì§€ ì•ŠìŒ.
     - ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ë‹¤ë¥¸ ì„¸ê·¸ë¨¼íŠ¸ì—ì„œ ì‘ì—… ê°€ëŠ¥
  4. Atomic Operations
     - ConcureentHashMap ì€ ì›ìì  ë©”ì„œë“œë¥¼ ì œê³µ
     - ì˜ˆë¥¼ ë“¤ì–´, putIfAbsent(), remove(), replace() ì™€ ê°™ì€ ë©”ì„œë“œë“¤ì€ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•  ë•Œë§Œ ì‘ì—… ìˆ˜í–‰
     - ì¦‰ ìŠ¤ë ˆë“œ ê°„ì˜ ì¶©ëŒì„ ë°©ì§€í•˜ê³  ì•ˆì „í•œ ì—…ë°ì´íŠ¸ ë³´ì¥
  5. Weakly Consistent Iterators
     - ConcuurentHashMap ì˜ ë°˜ë³µìëŠ” ì•½í•œ ì¼ê´€ì„± ì œê³µ
     - ë°˜ë³µ ì¤‘ì— ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ë§µì„ ìˆ˜ì •í•˜ë”ë¼ë„ ConcurrentModificationExcpetion ë°œìƒ X
     - í˜„ëŒ€ ìƒíƒœì˜ ìŠ¤ëƒ…ìƒ·ì„ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆìŒ. ì´ë¡œ ì¸í•´ ë°˜ë³µ ì¤‘ì—ë„ ì•ˆì •ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŒ
  6. Rehashing
     - ConcurrentHashMap ì€ ë‚´ë¶€ì ìœ¼ë¡œ ë™ì ìœ¼ë¡œ í¬ê¸°ë¥¼ ì¡°ì •
     - ë°ì´í„°ê°€ ì¼ì • ìˆ˜ì¹˜ë¥¼ ì´ˆê³¼í•˜ë©´ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì¬í•´ì‹œ(rehash) í•˜ì—¬ ì„±ëŠ¥ ì €í•˜ë¥¼ ë°©ì§€
     - ì´ ê³¼ì •ì—ì„œë„ ë™ê¸°í™”ë¥¼ í†µí•´ ì•ˆì „ì„±ì„ ìœ ì§€

`private static long sequence = 0L; // static ì‚¬ìš©`

- Spring ì»¨í…Œì´ë„ˆ ì•ˆì—ì„œ ì“°ë©´ ì–´ì°¨í”¼ ì‹±ê¸€í†¤ì´ê¸° ë•Œë¬¸ì— static ì•ˆ ì¨ë„ í¬ê²Œ ìƒê´€ X

`return new ArrayList<>(store.values());`

- ì´ë ‡ê²Œ ArrayList ë¥¼ ìƒˆë¡œ ìƒì„±í•´ì„œ ê°ì‹¸ì„œ ë°˜í™˜í•˜ë©´, ArrayList ì— ê°’ì„ ë„£ì–´ë„ ì›ë³¸ì— ëŒ€í•œ ë³€ê²½ì´ ì—†ê¸° ë•Œë¬¸ì— ì•ˆì „

update - `findItem.setXXX(updateParam.getXXX)`

- ì´ëŸ° ê²½ìš° ë³„ë„ë¡œ íŒŒë¼ë¯¸í„° 3ê°œì— ëŒ€í•œ update ìš© ê°ì²´(DTO ë“±)ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŒ

  ì˜ˆ) ItemParameterDto ì— 3ê°œë§Œ ë„£ì–´ë‘ëŠ” ê²ƒì´ ì¢‹ìŒ

  - ê°œë°œìê°€ updateParam ì— id ê°€ ìˆëŠ”ë° ì´ê±´ ì‚¬ìš©ì„ ì•ˆí•˜ë‚˜? ë“±ì˜ í˜¼ë€ì´ ì˜¬ ìˆ˜ ìˆìŒ
  - ë”°ë¡œ DTO ë¥¼ ë§Œë“¤ì–´ì„œ ëª…í™•í•˜ê²Œ í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ!
  - ì¤‘ë³µê³¼ ëª…í™•ì„±ì˜ íŠ¸ë ˆì´ë“œ ì˜¤í”„ì—ì„œëŠ” í•­ìƒ 'ëª…í™•ì„±'ì„ ë”°ë¥´ëŠ” ê²ƒì´ ì¢‹ìŒ

`clearStore()` ì€ í…ŒìŠ¤íŠ¸ì—ì„œ ì“°ë ¤ê³  ë§Œë“  ê²ƒ



### ItemRepositoryTest - ìƒí’ˆ ì €ì¥ì†Œ í…ŒìŠ¤íŠ¸

```java
package hello.itemservice.domain.item;

import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;

import java.util.List;

import static org.assertj.core.api.AssertionsForClassTypes.assertThat;
import static org.junit.jupiter.api.Assertions.*;

class ItemRepositoryTest {

    ItemRepository itemRepository = new ItemRepository();

    @AfterEach // TEST ëŒë‚  ë•Œë§ˆë‹¤ ì‹¤í–‰
    void afterEach() {
        // í…ŒìŠ¤íŠ¸í•  ë•Œë§ˆë‹¤ ë°ì´í„° ì§€ì›Œì¤Œ
        itemRepository.clearStore();
    }

    @Test
    void save() {
        //given
        Item item = new Item("itemA", 10000, 10);
        //when
        Item savedItem = itemRepository.save(item);
        //then
        Item findItem = itemRepository.findById(savedItem.getId());
        assertThat(findItem).isEqualTo(savedItem);
    }

    @Test
    void findAll() {
        //given
        Item item1 = new Item("itemA", 10000, 10);
        Item item2 = new Item("itemB", 10000, 10);
        itemRepository.save(item1);
        itemRepository.save(item2);
        //when
        List<Item> findItems = itemRepository.findAll();

        //then
        assertThat(findItems.size()).isEqualTo(2);
        assertThat(findItems.contains(item1)).isEqualTo(true);
        assertThat(findItems.contains(item2)).isEqualTo(true);
    }

    @Test
    void updateItem() {
        //given
        Item item = new Item("itemA", 10000, 10);
        Item savedItem = itemRepository.save(item);
        Long id = savedItem.getId();
        //when
        Item updateParam = new Item("itemB", 5000, 5);
        itemRepository.update(id, updateParam);

        Item findItem = itemRepository.findById(id);
        //then
        assertThat(findItem.getItemName()).isEqualTo(updateParam.getItemName());
        assertThat(findItem.getPrice()).isEqualTo(updateParam.getPrice());
        assertThat(findItem.getQuantity()).isEqualTo(updateParam.getQuantity());
    }
}
```

## ìƒí’ˆ ì„œë¹„ìŠ¤ HTML

> ì°¸ê³ 
>
> ì •ì  ë¦¬ì†ŒìŠ¤ê°€ ê³µê°œë˜ëŠ” /resources/static í´ë”ì— HTML ì„ ë„£ì–´ë‘ë©´, ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œë„ ê³µê°œëœë‹¤.
>
> ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•œë‹¤ë©´ ì§€ê¸ˆì²˜ëŸ¼ ê³µê°œí•  í•„ìš”ì—†ëŠ” HTML ì„ ë‘ëŠ” ê²ƒì€ ì£¼ì˜í•˜ì
>
> ì„œë¹„ìŠ¤ ìš´ì˜í•  ë•ŒëŠ” ê³µê°œí•  í•„ìš”ê°€ ì—†ëŠ” ê²ƒ!

## ìƒí’ˆ ëª©ë¡ - íƒ€ì„ë¦¬í”„

```java
package hello.itemservice.web.item.basic;

import hello.itemservice.domain.item.Item;
import hello.itemservice.domain.item.ItemRepository;
import jakarta.annotation.PostConstruct;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

import java.util.List;

@Controller
@RequestMapping("/basic/items")
@RequiredArgsConstructor // DI(ìƒì„±ì ì£¼ì… ë°©ì‹)
public class BasicItemController {

    private final ItemRepository itemRepository;

    @GetMapping
    public String items(Model model) {
        List<Item> items = itemRepository.findAll();
        model.addAttribute("items", items);
        return "basic/items";
    }

    /**
     * í…ŒìŠ¤íŠ¸ìš© ë°ì´í„° ì¶”ê°€
     */
    @PostConstruct
    public void init() {
        itemRepository.save(new Item("testA", 10000, 10));
        itemRepository.save(new Item("testB", 20000, 20));
    }
}

```

ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œì§ì€ itemRepository ì—ì„œ ëª¨ë“  ìƒí’ˆì„ ì¡°íšŒí•œ ë‹¤ìŒ ëª¨ë¸ì— ë‹´ê³ , ë·° í…œí”Œë¦¿ì„ í˜¸ì¶œí•œë‹¤.

@RequiredArgsConstructor

- final ì´ ë¶™ì€ ë©¤ë²„ë³€ìˆ˜ë§Œ ì‚¬ìš©í•´ì„œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ
- final í‚¤ì›Œë“œë¥¼ ì ˆëŒ€ ë¹¼ë©´ ì•ˆë¨. ê·¸ëŸ¼ ItemRepository ì˜ì¡´ê´€ê³„ ì£¼ì… ì•ˆë¨

í…ŒìŠ¤íŠ¸ìš© ë°ì´í„° ì¶”ê°€

- í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°ê°€ ì—†ìœ¼ë©´, íšŒì› ëª©ë¡ ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸ ì–´ë ¤ì›€
- @PostConstruct : í•´ë‹¹ ë¹ˆì˜ ì˜ì¡´ê´€ê³„ê°€ ëª¨ë‘ ì£¼ì…ë˜ê³  ë‚˜ë©´ ì´ˆê¸°í™” ìš©ë„ë¡œ í˜¸ì¶œ

**Items.html ì •ì  HTML ì„ ë·° í…œí”Œë¦¿(templates) ì˜ì—­ìœ¼ë¡œ ë³µì‚¬í•˜ê³  ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •**

**items.html**

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="../../static/css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
</head>
<body>
<div class="container" style="max-width: 600px">
    <div class="py-5 text-center">
        <h2>ìƒí’ˆ ëª©ë¡</h2>
    </div>
    <div class="row">
        <div class="col">
            <button class="btn btn-primary float-end"
                    onclick="location.href='addForm.html'"
            th:onclick="|location.href='@{/basic/items/add'|" type="button">ìƒí’ˆ ë“±ë¡
            </button>
        </div>
    </div>
    <hr class="my-4">
    <div>
        <table class="table">
            <thead>
            <tr>
                <th>ID</th>
                <th>ìƒí’ˆëª…</th>
                <th>ê°€ê²©</th>
                <th>ìˆ˜ëŸ‰</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${items}">
                <td><a href="resources/static/html/item.html"
                        th:href="@{/basic/items/{itemId}(itemId=${item.id})}"
                        th:text="${item.id}">íšŒì›id</a></td>
                <td><a href="resources/static/html/item.html"
                        th:href="@{|/basic/items/${itemId}|}"
                        th:text="${item.itemName}">ìƒí’ˆëª…</a></td>
                <td th:text="${item.price}">10000</td>
                <td th:text="${item.quantity}">10</td>
            </tr>
            </tbody>
        </table>
    </div>
</div> <!-- /container -->
</body>
</html>
```

**íƒ€ì„ë¦¬í”„ ì‚¬ìš© ì„ ì–¸**

`<html xmlns:th="http://www.thymeleaf.org">`

**ì†ì„± ë³€ê²½ - th:href**

`th:href="@{/css/bootstrap.min.css}"`

- HTMLì„ ê·¸ëŒ€ë¡œ ë³¼ ë•ŒëŠ” ê¸°ì¡´ href ì†ì„±ì´ ì‚¬ìš©ë˜ê³ , ë·° í…œí”Œë¦¿ì„ ê±°ì¹˜ë©´ th:href ê°’ì´ href ë¡œ ëŒ€ì²´ë˜ë©´ì„œ ë™ì ìœ¼ë¡œ ë³€ê²½
- ëŒ€ë¶€ë¶„ì˜ HTML ì†ì„±ì„ th:xxx ë¡œ ë³€ê²½ ê°€ëŠ¥

**URL ë§í¬ í‘œí˜„ì‹ - @{...}**

`th:href="@{/css/bootstrap.min.css}"`

- `@{...}` : URL ë§í¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
- URL ë§í¬ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ë©´ ì„œë¸”ë¦¿ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ í¬í•¨

**ë¦¬í„°ëŸ´ ëŒ€ì²´ - |...|**

- íƒ€ì„ë¦¬í”„ì—ì„œ ë¬¸ìì™€ í‘œí˜„ì‹ ë“±ì€ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë”í•´ì„œ ì‚¬ìš©

  ì˜ˆ) `<sapn th:text="'Welcome to our application, ' + &{username} + '!'"`

- ë¦¬í„°ëŸ´ ëŒ€ì²´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë©´, ë”í•˜ê¸° ì—†ì´ í¸ë¦¬í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥

  ì˜ˆ) `<span th:text="|Welcome to our application, ${user.name}!|">`

- ê·¸ë˜ì„œ ë¦¬í„°ëŸ´ ëŒ€ì²´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•œ ê²ƒ

  `th:onclick="|location.href='@{/basic/items/add}'"`

**ë°˜ë³µ ì¶œë ¥ - th:each**

- `<tr th:each="item : ${items}"`
  - ëª¨ë¸ì— í¬í•¨ëœ items ì»¬ë ‰ì…˜ ë°ì´í„°ê°€ item ë³€ìˆ˜ì— í•˜ë‚˜ì”© í¬í•¨ë˜ê³ , ë°˜ë³µë¬¸ ì•ˆì— item ë³€ìˆ˜ ì‚¬ìš© ê°€ëŠ¥
- ì»¬ë ‰ì…˜ ìˆ˜ ë§Œí¼ `<tr>..</tr>` ì´ í•˜ìœ„ íƒœê·¸ë¥¼ í¬í•¨í•´ì„œ ìƒì„±

**ë³€ìˆ˜ í‘œí˜„ì‹ - ${...}**

- ëª¨ë¸ì— í¬í•¨ëœ ê°’ì´ë‚˜, íƒ€ì„ë¦¬í”„ ë³€ìˆ˜ë¡œ ì„ ì–¸í•œ ê°’ì„ ì¡°íšŒ ê°€ëŠ¥
- í”„ë¡œí¼í‹° ì ‘ê·¼ë²•ì„ ì‚¬ìš©(item.getPrice())

**ë‚´ìš© ë³€ê²½ - th:text**

- ë‚´ìš©ì˜ ê°’ì„ th:text ì˜ ê°’ìœ¼ë¡œ ë³€ê²½
- 1000ì„ ${item.price}ì˜ ê°’ìœ¼ë¡œ ë³€ê²½

**URL ë§í¬ í‘œí˜„ì‹2 - @{...}**

- `th:href="@{/basic/items/{itemId}(itemId=${item.id})}"`
- ìƒí’ˆ ID ë¥¼ ì„ íƒí•˜ëŠ” ë§í¬ë¥¼ í™•ì¸
- URL ë§í¬ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ë©´ ê²½ë¡œë¥¼ í…œí”Œë¦¿ì²˜ëŸ¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥(PathVariable ì²˜ëŸ¼)

**URL ë§í¬ ê°„ë‹¨íˆ**

- `ht:href="@{|/basic/items/${item.id}|}"`

## ìƒí’ˆ ìƒì„¸

- ìƒí’ˆ ìƒì„¸ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë·°ë¥¼ ê°œë°œ

**BasicItemController ì— ì¶”ê°€**

```java
    @GetMapping("/{itemId}")
    public String item(@PathVariable Long itemId, Model model) {
        Item item = itemRepository.findById(itemId);
        model.addAttribute("item", item);
        return "basic/item";
    }
```

**item.html**

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="../css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <style>
        .container {
            max-width: 560px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="py-5 text-center">
        <h2>ìƒí’ˆ ìƒì„¸</h2>
    </div>
    <div>
        <label for="itemId">ìƒí’ˆ ID</label>
        <input type="text" id="itemId" name="itemId" class="form-control"
               value="1" th:value="${item.id}" readonly>
    </div>
    <div>
        <label for="itemName">ìƒí’ˆëª…</label>
        <input type="text" id="itemName" name="itemName" class="form-control"
               value="ìƒí’ˆA" th:value="${item.itemName}" readonly>
    </div>
    <div>
        <label for="price">ê°€ê²©</label>
        <input type="text" id="price" name="price" class="form-control"
               value="10000" th:value="${item.price}" readonly>
    </div>
    <div>
        <label for="quantity">ìˆ˜ëŸ‰</label>
        <input type="text" id="quantity" name="quantity" class="form-control"
               value="10" th:value="${item.quantity}" readonly>
    </div>
    <hr class="my-4">
    <div class="row">
        <div class="col">
            <button class="w-100 btn btn-primary btn-lg"
                    onclick="location.href='editForm.html'"
                    th:onclick="|location.href='@{/basic/items/{itemId}/edit(itemId=${item.id})}'|" type="button">ìƒí’ˆ ìˆ˜ì •</button>
        </div>
        <div class="col">
            <button class="w-100 btn btn-secondary btn-lg"
                    onclick="location.href='items.html'"
                    th:onclick="|location.href='@{/basic/items}'|" type="button">ëª©ë¡ìœ¼ë¡œ</button>
        </div>
    </div>
</div> <!-- /container -->
</body>
</html>
```

## ìƒí’ˆ ë“±ë¡ í¼

**BasicItemController**

```java
@GetMapping("/add")
public String addForm() {
    return "basic/addForm";
}
```

**addForm.html**

```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="../css/bootstrap.min.css"
          th:href="@{/css/bootstramp.min.css}" rel="stylesheet">
    <style>
        .container {
            max-width: 560px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="py-5 text-center">
        <h2>ìƒí’ˆ ë“±ë¡ í¼</h2>
    </div>
    <h4 class="mb-3">ìƒí’ˆ ì…ë ¥</h4>
    <form action="item.html" th:action method="post">
        <div>
            <label for="itemName">ìƒí’ˆëª…</label>
            <input type="text" id="itemName" name="itemName" class="form-control"
                   placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <div>
            <label for="price">ê°€ê²©</label>
            <input type="text" id="price" name="price" class="form-control"
                   placeholder="ê°€ê²©ì„ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <div>
            <label for="quantity">ìˆ˜ëŸ‰</label>
            <input type="text" id="quantity" name="quantity" class="form-control"
                   placeholder="ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”">
        </div>
        <hr class="my-4">
        <div class="row">
            <div class="col">
                <button class="w-100 btn btn-primary btn-lg" type="submit">ìƒí’ˆ ë“±ë¡</button>
            </div>
            <div class="col">
                <button class="w-100 btn btn-secondary btn-lg"
                        onclick="location.href='items.html'"
                        th:onclick="|location.href='@{/basic/items}'|" type="button">ì·¨ì†Œ</button>
            </div>
        </div>
    </form>
</div> <!-- /container -->
</body>
</html>
```

ì†ì„± ë³€ê²½ - th:action

- HTML form ì—ì„œ action ì— ê°’ì´ ì—†ìœ¼ë©´ í˜„ì¬ URL ì— ë°ì´í„°ë¥¼ ì „ì†¡
- ìƒí’ˆ ë“±ë¡ í¼ì˜ URL ê³¼ ì‹¤ì œ ìƒí’ˆ ë“±ë¡ì„ ì²˜ë¦¬í•˜ëŠ” URL ì„ ë˜‘ê°™ì´ ë§ì¶”ê³  HTTP ë©”ì„œë“œë¡œ ë‘ ê¸°ëŠ¥ì„ êµ¬ë¶„
  - ìƒí’ˆ ë“±ë¡ í¼ : GET `/basic/items/add`
  - ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ : POST `basic/items/add`

- ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ GET ë§¤í•‘ì„ ì‚¬ìš©í•œ ì´ìœ ëŠ” ì´ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë‹¨ìˆœí•˜ê²Œ ìƒí’ˆì„ ë“±ë¡í•˜ëŠ” í¼ì„ ë°˜í™˜í•˜ëŠ” ì—­í• ì„ í•˜ê¸° ë•Œë¬¸

## ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ - @ModelAttribute

- POST - HTML Form
  - content-type : application/x-www-form-urlencoded
  - ë©”ì‹œì§€ ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ `itemName=itemA&price=10000&quantity=10`
  - ì˜ˆ) íšŒì›ê°€ì…, ìƒí’ˆì£¼ë¬¸, HTML Form ì‚¬ìš©
- ìš”ì²­ íŒŒë¼ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ë¯€ë¡œ `@RequestParam` ì‚¬ìš©

### ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ - @RequestParam

**BasicItemController**

```java
    @PostMapping("/add")
    public String addItemV1(@RequestParam String itemName,
                            @RequestParam int price,
                            @RequestParam Integer quantity,
                            Model model) {
        Item item = new Item();
        item.setItemName(itemName);
        item.setPrice(price);
        item.setQuantity(quantity);

        itemRepository.save(item);

        model.addAttribute("item", item);

        return "basic/item";
    }
```

- @RequestParam : itemName, price, quantity ìš”ì²­ íŒŒë¼ë¯¸í„° ë°ì´í„°ë¥¼ ê° ë³€ìˆ˜ì— ë°›ìŒ
- Item ê°ì²´ë¥¼ ìƒì„±í•˜ê³  itemRepository ë¥¼ í†µí•´ì„œ ì €ì¥
- ì €ì¥ëœ item ì„ ëª¨ë¸ì— ë‹´ì•„ì„œ ë·°ì— ì „ë‹¬

ì—¬ê¸°ì„œëŠ” ìƒí’ˆ ìƒì„¸ì— ì‚¬ìš©í•œ item.html ë·° í…œí”Œë¦¿ ê·¸ëŒ€ë¡œ ì¬í™œìš©

### ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ - @ModelAttribute

**BasicItemController**(V2, V3 í•©ì³ì„œ ì‹¤ìŠµ)

```java
    @PostMapping("/add")
    public String addItemV2(@ModelAttribute Item item, Model model) {
        itemRepository.save(item);
//        model.addAttribute("item", item); // ìë™ ì¶”ê°€, ìƒëµ ê°€ëŠ¥

        return "basic/item";
    }
```

@ModelAttribute - ìš”ì²­ íŒŒë¼ë¯¸í„° ì²˜ë¦¬

- `@ModelAttribute` ëŠ” Item ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ í”„ë¡œí¼í‹° ì ‘ê·¼ë²•(setXXX)ìœ¼ë¡œ ì…ë ¥í•´ì¤Œ

@ModelAttribute - Model ì¶”ê°€

- `@ModelAttribute` ëŠ” ëª¨ë¸ì— ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ë„£ì–´ì¤Œ

- ëª¨ë¸ì— ë°ì´í„°ë¥¼ ë‹´ì„ ë•ŒëŠ” ì´ë¦„ì´ í•„ìš”í•œë°, ì´ë¦„ì€ `@ModelAttribute(name ì†ì„±)` ì„ ì‚¬ìš©í•œë‹¤.

  ì˜ˆ) @ModelAttribute("hello") Item item == model.addAttribute("hello", item);

@ModelAttribute - ì´ë¦„ ìƒëµ ê°€ëŠ¥

- `@ModelAttribute Item item`

BasicItemController(V4, @ModelAttribute ìƒëµ)

```java
    @PostMapping("/add")
    public String addItemV4(Item item) {
        itemRepository.save(item);

        return "basic/item";
    }
```

## ìƒí’ˆ ìˆ˜ì •

**BasicItemController**

```java
    @GetMapping("/{itemId}/edit")
    public String editForm(@PathVariable Long itemId, Model model) {
        Item item = itemRepository.findById(itemId);
        model.addAttribute("item", item);
        return "basic/editForm";
    }
```

- ìˆ˜ì •ì— í•„ìš”í•œ ì •ë³´ ì¡°íšŒí•˜ê³ , ìˆ˜ì •ìš© í¼ ë·°ë¥¼ í˜¸ì¶œ

## ìƒí’ˆ ìˆ˜ì • ê°œë°œ

**BasicItemController**

```java
    @PostMapping("/{itemId}/edit")
    public String edit(@PathVariable Long itemId, @ModelAttribute Item item) {
        itemRepository.update(itemId, item);
        return "redirect:/basic/items/{itemId}"; // PathVariable ì— ìˆëŠ” ê°’ ì—¬ê¸°ì„œ ì‚¬ìš© ê°€ëŠ¥
    }
```

ë¦¬ë‹¤ì´ë ‰íŠ¸

- ìŠ¤í”„ë§ì€ `redirect:/...` ìœ¼ë¡œ í¸ë¦¬í•˜ê²Œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì§€ì›
- `redirect:/basic/items/{itemId}`
  - ì»¨íŠ¸ë¡¤ëŸ¬ì— ë§¤í•‘ëœ @PathVariable ì˜ ê°’ì€ redirect ì—ë„ ì‚¬ìš© ê°€ëŠ¥

> ì°¸ê³ 
>
> HTML Form ì „ì†¡ì€ PUT, PATCH ì§€ì› X
>
> GET, POST ë§Œ ì‚¬ìš© ê°€ëŠ¥, PUT/PATCH ëŠ” HTTP API ì „ì†¡ ì‹œ ì‚¬ìš©

ğŸ¤” ì™œ ë“±ë¡í•  ë•ŒëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ì•ˆ ì“°ì§€? PRG íŒ¨í„´ ì„¤ëª…ì„ ìœ„í•´

## PRG Post/Redirect/Get

- ìƒí’ˆ ë“±ë¡ì„ ì™„ë£Œí•˜ê³  ì›¹ ë¸Œë¼ìš°ì €ì˜ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì.
- ìƒí’ˆì´ ê³„ì†í•´ì„œ ì¤‘ë³µ ë“±ë¡ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

**ì „ì²´ íë¦„**

1. ìƒí’ˆ ëª©ë¡ì—ì„œ ìƒí’ˆ ë“±ë¡ Form ìœ¼ë¡œ ì´ë™
2. ìƒí’ˆ ë“±ë¡ í¼ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ ìƒí’ˆ ë“±ë¡ í¼ ë·° ë³´ì„
3. ìƒí’ˆ ë“±ë¡ í¼ ë°ì´í„°ë¥¼ ë„˜ê¸°ë©´, ì €ì¥ ì»¨íŠ¸ë¡¤ëŸ¬ì— ê°€ì„œ ìƒí’ˆ ìƒì„¸ ë·° í˜¸ì¶œ

**POST ë“±ë¡ í›„ ìƒˆë¡œ ê³ ì¹¨**

- ì›¹ ë¸Œë¼ìš°ì €ì˜ ìƒˆë¡œ ê³ ì¹¨ì€ ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•˜ëŠ” ê²ƒì´ë‹¤.

**POST, Redirect GET**

- ìƒˆë¡œê³ ì¹¨ì€ ë§ˆì§€ë§‰ì— ì„œë²„ì— ì „ì†¡í•œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì „ì†¡í•˜ëŠ” ê²ƒì´ë¯€ë¡œ, ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ í˜¸ì¶œí•´ì£¼ë©´ ëœë‹¤!
- ì›¹ìƒí’ˆ ì €ì¥ í›„ì— ì‹¤ì œ ìƒí’ˆ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë‹¤ì‹œ ì´ë™í•œë‹¤.
- ë”°ë¼ì„œ ë§ˆì§€ë§‰ì— í˜¸ì¶œí•œ ë‚´ìš©ì´ ìƒí’ˆ ìƒì„¸ í™”ë©´ì¸ GET /items/{id} ê°€ ë˜ëŠ” ê²ƒ

**BasicItemController ì— ì¶”ê°€**

```java
    @PostMapping("/add")
    public String addItemV5(@ModelAttribute Item item) {
        itemRepository.save(item);
        return "redirect:/basic/items/" + item.getId();
    }
```

`return "redirect:/basic/items/" + item.getId();`

- ê·¸ëŸ¬ë‚˜ ì´ ë°©ì‹ì€ ì¶”ì²œí•˜ì§€ ì•ŠìŒ
- +item.getId() ì²˜ëŸ¼ URL ì— ë³€ìˆ˜ë¥¼ ë”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ URL ì¸ì½”ë”©ì´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ìœ„í—˜

### RedirectAttributes

**BasicItemController ì— ì¶”ê°€**

```java
    @PostMapping("/add")
    public String addItemV6(@ModelAttribute Item item, RedirectAttributes redirectAttributes) {
        Item savedItem = itemRepository.save(item);
        redirectAttributes.addAttribute("itemId", savedItem.getId());
        redirectAttributes.addAttribute("status", true);
        return "redirect:/basic/items/{itemId}";
    }
```

RedirectAttributes

- URL ì¸ì½”ë”©ë„ í•´ì£¼ê³ , pathVariable, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê¹Œì§€ ì²˜ë¦¬í•´ì¤Œ
  - `redirect:/basic/items/{itemId}`
    - pathVairable ë°”ì¸ë”© : {itemId}
    - ë‚˜ë¨¸ì§€ëŠ” ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬ : ?satus=true

ë·° í…œí”Œë¦¿ ë©”ì‹œì§€ ì¶”ê°€

```html
<h2 th:if="${param.status}" th:text="'ì €ì¥ ì™„ë£Œ!'"></h2>
```

- `th:if`

  í•´ë‹¹ ì¡°ê±´ì´ ì°¸ì´ë©´ ì‹¤í–‰

- `${param.status}` : íƒ€ì„ë¦¬í”„ì—ì„œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ í¸í•˜ê²Œ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥

  - ì›ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ëª¨ë¸ì— ì§ì ‘ ë‹´ê³  ê°’ì„ êº¼ë‚´ì•¼ í•¨
  - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ëŠ” ìì£¼ ì‚¬ìš©í•´ì„œ íƒ€ì„ë¦¬í”„ì—ì„œ ì§ì ‘ ì§€ì›

---
ì¶œì²˜ : https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-mvc-1