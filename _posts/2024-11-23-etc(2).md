---
layout: single
title:  "[세미나] 2023 인프콘"
published : true
categories: etc
toc: true
author_profile: false
sidebar:
    nav: "docs"
---

# 소프트웨어 설계와 추상적, 구조적 사고

## 개발자와 프로그램

**개발자가 하는 일?**

- 개발자는 프로그램을 만드는 직업
- 프로그램은 누군가가 원하는 결과를 위해 수행되는 일의 계획이라는 뜻
- 프로그램은 특정 문제를 해결하기 위해 만들어진다.
- 즉, 개발자는 문제를 해결하기 위해서 프로그램을 만드는 직업
  - 여기서 개발자가 문제를 해결하는 것은 비즈니스 문제를 해결해주고 이익을 얻는 행위!
  - 여기서 이익은 꼭 돈이 아니더라도, 사회적 가치를 말하기도 함

**문제 해결을 위한 프로세스**

1. 문제 이해 / 분석
   - 요구사항 수집, 인터뷰
2. 설계
   - 도메인 모델링, 데이터 설계
   - 아키텍처, 인프라
   - 모듈 설계
3. 구현
   - 코드 작성(이것이 개발자가 한다고 생각했었던 일)
   - 리팩토링
   - 테스트
4. 평가
   - 피드백

이 프로세스를 크게 나누면, 문제를 파악하고 컴퓨터 시스템에 적합하게 설계하는 과정(1, 2번)과 컴퓨터 시스템으로 전산화를 하는 과정(3, 4번)

실제 개발자는 이 모든 과정에 관여한다.

시니어가 될수록 책임과 범위가 늘어난다.

**우리는 어떤 시니어가 되어야 하는가?**

- 시니어 개발자는 풍부한 경험과 직관이 있음
- 하지만 어떤 문제를 발견하더라도 유연하게 해결할 수 있는 방법론을 익히는 것이 중요함

- 추상적이고 구조적인 사고가 유연하게 해결할 수 있는 방법론의 핵심

## 추상적, 구조적 사고란?

- 개발자가 하는 거의 모든 일은 추상적이고 구조적인 생각을 통해 나옴

### 추상적 사고

- 추상 : 여러가지 사물이나 개념에서 공통되는 특성이나 속성 따위를 추출하여 파악하는 작용

  - 공통과 특성이 핵심 키워드
  - 추상이 핵심은 사물을 단순화하고 재해석하는 것
  - 요소 환원주의 사고방식 : 높은 단계의 개념을 더 낮은 단계 요소로 분해하는 것으로 이해하는 것.

- 추상화 과정

  1. 현상 / 물체
     - 가능한 만큼 분해
  2. 분석 / 해체
     - 의도와 목적을 가지고 결합
  3. 결합

- 추상화는 행위에도 적용할 수 있음

  - 예시) 피자 만들기

    재료 준비 - 오븐 예열 - 도우 반죽 - 재료 토핑 - 굽기

    이 프로세스를 피자 주문으로 만드는 것. 함수로 묶는 것과 비슷한 개념

- 추상화는 계층이 존재하며, 어디까지 추상화해야하는지 적절한 수준을 상황마다 정해야 한다.
  - 과도한 추상화는 실제 로직을 알 수 없게 만든다.

### 구조적 사고

- 구조적 사고 : 내용을 겹치지 않고 빈틈없이 정리하는 것
  - 이미지로 생각해보면 테트리스처럼 빈틈없이 채워진 것
- MECE 프레임워크에 자세히 나와있음
- 요소들이 누락되는 것 없이 중복되지 않도록 배타적이어야 한다는 것
- 중요한 것은 어떻게 나누고 채울것인가를 정하는 것

## 구체적인 방법(for 개발 업무에 실천)

### 탑 다운과 바텀 업

Top-Down

- 큰 문제를 정의하고 세부적인 문제를 찾아 해결하는 방법론
- 하향식 접근법이라고도 부름
- 이 사고방식은 작은 문제들이 우리가 모르는 미지수이거나 리서치가 필요할 때 유용

Bottom-Up

- 세부적인 문제를 해결하여 전체 문제의 답을 찾는 방법
- 상향식 접근법이라고도 부름
- 이 사고방식은 작은 문제들에 대해서 잘 알고 있고 이것들을 조합하면 문제를 해결할 수 있을 때 유용

탑다운과 바텀업은 상호 보완적

## 모델

- 추상적이고 구조적인 사고를 통해 모델을 만들 수 있다
- 모델은 세상을 표현하기 위한 방법
  - 단순히 데이터로 여겨질 때가 많지만 더 큰 의미를 가진다
- 모델링을 할 때 3가지를 한다.
  1. 분류(Classification)
     - 어떻게 분류할 것인가?
     - 분량 방식 2가지 존재. Categorizing(비슷한 요소끼리 묶는 것), Grouping(특정한 기준으로 묶는 것, 속성을 부여하여 묶는 것도 가능)
  2. 추상화(Abstraction)
     - 어떻게 바라볼 것인가? 그에 따라 어떤 요소를 관심있게 뽑아낼 것인지
     - 추상화 방식 2가지 존재. Projection(요소에서 필요한 내용을 뽑아내는 것, 클래스, 도메인 모델 등), Layering(요소를 계층으로 나누는 것, 한 요소를 여러 관점으로 볼 수 있음, OSI 7 Layer, Layered Architecture 등)
  3. 일반화(Generalization)
     - 어떤 공통점이 있는가?
     - 비슷한 것을 묶어서 재사용할 수 있게 하는 것
     - Pattern(비슷한 사용 사례를 묶어 공통적으로 쓸 수 있게 하는 것, 디자인 패턴 등)

- 모델링을 할 때 추상화와 구조적 사고는 필수적이다.

### 예시 1 - Domain Modeling

- 추상화 : 사용자가 게시판에 글을 남긴다. 라는 요구사항에서 필요한 요소를 추출
- 구조화 : 뽑아낸 요소의 역할이 겹치지 않고 요구사항을 만족하도록 배치

여기서 한 단계 더 추상화한다면?

![image-20241123231747412]({{site.url}}/images/2024-11-23-etc(2)/image-20241123231747412.png)

- Board Subsystem 과 User Subsystem 으로 카테고라이징을 할 수 있음

### 예시 2 - OSI 7 Layer

- 여기에는 행위에 따라 추상화한 것과 레이어링과 뽑아낸 요소들을 겹치지 않게 순서대로 배치

- 한 단계 더 추상화 가능(활동한 영역에 따라 그룹핑 가능)

  ![image-20241123231923057]({{site.url}}/images/2024-11-23-etc(2)/image-20241123231923057.png)

- 이미 추상화, 구조화한 것을 한 단계 더 추상화, 구조화할 수 있음

## 프레임워크

- Frame, Work 합쳐진 것
- 프레임워크를 추상화와 구조적 사고로 만들어낼 수 있음

- 우리가 직접 프레임워크를 만드는 것도 가능

- 틀에 맞춰서 문제를 해결하는 것이므로 프레임워크라고 할 수 있음

- 프레임워크 설계 과정

  문제 - 분석/분해 - 결합

## 소프트웨어 설계

### 소프트웨어 구현 단계

도메인 모델링 - 아키텍처 - 코드 작성

### 도메인 모델링

- 도메인은 우리가 해결할 '문제'에 대한 비즈니스 전문 지식
- 도메인 모델링은 비즈니스를 프로그램 세계로 표현하는 것
  - 비즈니스를 프로그래밍 세계로 변환하는 것

예제) 수업 매칭 서비스

![image-20241123232423557]({{site.url}}/images/2024-11-23-etc(2)/image-20241123232423557.png)

- 단계적으로 추상화 가능

  ![image-20241123232556504]({{site.url}}/images/2024-11-23-etc(2)/image-20241123232556504.png)

  - Things
  - Teacher - Student
  - Application, Recruitment
  - Payment
  - ...

- 추가 요구사항

  ![image-20241123232624947]({{site.url}}/images/2024-11-23-etc(2)/image-20241123232624947.png)

  - Lesson
  - 결제가 구인에 따라 되는 것이 아니므로 도메인 모델 사이 관계 변경 ...

  ![image-20241123232702989]({{site.url}}/images/2024-11-23-etc(2)/image-20241123232702989.png)

# EKS 비용 절감 전략 : 회사에서 실현한 사이드 프로젝트의 아이디어

그라운드X 이상원

## 아이디어 : 스팟 인스턴스 사용

- 온디맨드 인스턴스
  - 필요할 때 원하는 시간 동안 사용
  - 비용이 비싸다
- 스팟 인스턴스
  - 경매 방식으로 사용
  - 하지만, 언제든지 의도치 않게 종료 가능
  - 비용 저렴(약 70% 이상 저렴)

## 아이디어 : 적절한 노드 선택

- EC2(노드)는 유형에 따라 비용이 다르다

예) 한 개의 파드를 어떤 노드에 스케줄링 하려고 하는데 그 파드가 필요로 하는 리소스가 1코어 CPU, 1기가 메모리인데 그런 파드 하나를 노드에 스케줄링 하기 위해서 그 노드의 스펙이 100코어 CPU 와 100기가 메모리일 필요는 없는 것

## 아이디어 : 적절한 컨테이너 리소스 설정

- 적절한 리소스 설정하면, 노드의 리소스 효율적 사용 가능

예) 어떤 파드가 실제로 사용하는 리소스가 1코어 CPU, 1기가 메모리인데 이 파드가 사용할 수 있도록 정의된 컨테이너 리소스 리퀘스트가 10코어 CPU, 10기가 메모리라면 이 파트가 어떤 노드에 스케줄링이 됐을 때 그 노드는 10코어 CPU와 10기가 메모리 만큼의 리소스를 확보하려고 할 것. 실제 사용하는 양은 10분의 1밖에 안되는데. 그럼 그 얘기는 결론적으로 노드의 리소스를 효율적으로 사용할 수가 없다는 이야기

![image-20241123234921945]({{site.url}}/images/2024-11-23-etc(2)/image-20241123234921945.png)

- 그림으로 설명해보면, 왼쪽 그림에도 파드가 4개이고 오른쪽 그림에도 파드가 4개인데, 왼쪽에 있는 파드의 경우에는 파드가 실제 사용하는 양보다 더 많은 리소스가 정의되어 있는 것
- 이것을 적절하게 라이프 라이징?을 통해서 오른쪽 처럼 바꾸는 것
- 이렇게 되면 기존에는 이 파드를 러닝시키기 위해 2개의 노드가 필요했는데, 1개의 노드로 줄었으므로 비용이 절감

## 아이디어 : 정해진 시간에 활성화

- 업무시간 활성화
- 비업무시간 비활성화

예) 운영 환경에서 Kubernetes 클러스터를 사용하고 있다면 운영 환경 뿐만 아니라 개발 환경을 위한 클러스터, QA 환경을 위한 클러스터, 스테이징 환경, 퍼포먼스 환경 등 다양한 환경을 위한 클러스터가 있을 거고 회사에 따라서는 데이터 엔지니어링을 위한 클러스터가 있을 수 있는 것
