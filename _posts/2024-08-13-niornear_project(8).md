---
title:  "[ë‹ˆì–´ë‹ˆì–´ í”„ë¡œì íŠ¸] AWS RDS ì •ë¦¬ ë° ì—°ë™"
published : true
categories: niornear_project
toc: true
author_profile: false
sidebar:
    nav: "docs"
---

# RDS êµ¬ì„± ì•„í‚¤í…ì²˜

- AWS RDS ëŠ” DB ë¥¼ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì¸í”„ë¼ ì•„í‚¤í…ì³ ë°©ë²• 3ê°€ì§€ ì œê³µ

## 1. RDS Multi AZ êµ¬ì¡°

![image-20241107224603056]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224603056.png)

- ë‘ ê°œ ì´ìƒì˜ AZ(ê°€ìš©ì˜ì—­)ì— ê±¸ì³ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•
- ì›ë³¸ê³¼ ë‹¤ë¥¸ DB(StandBy[ì„ì‹œ])ë¥¼ ìë™ìœ¼ë¡œ ë™ê¸°í™”í•˜ëŠ” êµ¬ì¡°
- ì´ êµ¬ì¡°ëŠ” AWS ì— ì˜í•´ì„œ ìë™ìœ¼ë¡œ ê´€ë¦¬ê°€ ì´ë£¨ì–´ì§
- í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ DB ì— ë¬¸ì œê°€ ìƒê¸°ë©´ RDS ëŠ” ì¦‰ì‹œ ë‹¤ë¥¸ AZ ì— ë§Œë“¤ì–´ì§„ ë³µì œë³¸ì„ ì›ë³¸ DB ë¡œ ìŠ¹ê²©ì‹œì¼œ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•¨ â†’ Disaster Recovery(ì¬í•´ë³µêµ¬)

### Multi AZ ì¬í•´ ë³µêµ¬ ì›ë¦¬

- DNS ì£¼ì†Œë¡œ RDS Primary ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•˜ì—¬ ì‚¬ìš©
- ê¸°ë³¸ì ìœ¼ë¡œ Standby DB ëŠ” DNS ê°€ ë¶€ì—¬ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì ‘ê·¼ ë¶ˆê°€ëŠ¥
- ë§Œì•½ RDS Primary ì¸ìŠ¤í„´ìŠ¤ì— ì¥ì• ê°€ ë°œìƒí•˜ë©´, ë‹¤ìŒ ê³¼ ê°™ì´ ì¥ì•  ë³µêµ¬ ì´ë£¨ì–´ì§
    1. RDS Primary ì— ë¬¸ì œê°€ ìƒê¸°ë©´, ìë™ìœ¼ë¡œ DNS ë¥¼ Standby ì¸ìŠ¤í„´ìŠ¤ë¡œ ì—°ë™
    2. ê¸°ì¡´ì— RDS Primary ì™€ì˜ ì—°ê²°ì„ ëŠìŒ
    3. ì´ë¥¼ fail over(fail ë‚¬ì„ ë•Œ ë³µêµ¬í•˜ëŠ” ê³¼ì •)
    4. EC2 ì…ì¥ì—ì„œëŠ” ë™ì¼í•œ Address ë¡œ ë°”ë¼ë³´ê³  ìˆìœ¼ë¯€ë¡œ ì¥ì• ë¥¼ ëŠë¼ì§€ ëª»í•¨ â†’ ë¹ ë¥¸ ì†ë„ë¡œ ì¥ì•  ë³µêµ¬ ê°€ëŠ¥

### Multi AZ ìš©ë„

- ë©€í‹° AZ êµ¬ì¡°ì˜ ë‹¨ì 
    - ì˜ˆë¹„ìš© ì¸ìŠ¤í„´ìŠ¤ê°€ í•˜ë‚˜ ë” ëŒê³  ìˆì–´ì„œ ë¹„ìš©ì´ ë‘ ë°°ê°€ ë“ ë‹¤ëŠ” ì 
    - Multi AZ êµ¬ì¡°ëŠ” í¼í¬ë¨¼ìŠ¤ì˜ ìƒìŠ¹ íš¨ê³¼ê°€ ì•„ë‹Œ ì•ˆì •ì„±ì„ ìœ„í•œ ì„œë¹„ìŠ¤
      
        â†’ ì„±ëŠ¥ ê°œì„ ì´ ì£¼ ëª©ì ì´ë¼ë©´, Read Replicas êµ¬ì¡°ë¥¼ ì´ìš©í•´ì•¼í•¨
        

## 2. Read Replica(ì½ê¸° ì „ìš© ë³µì œë³¸)

![image-20241107224617972]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224617972.png)

- Read Replica, RDS Primary ë¥¼ ë³µì œí•´ì„œ DB ì“°ê¸°ëŠ” RDS Primary ì—ì„œ ì²˜ë¦¬í•˜ê³ , DB ì½ê¸°ëŠ” ë³µì œí•œ ë³µì œë³¸ì—ì„œ ì²˜ë¦¬í•˜ëŠ” êµ¬ì¡°
- ì“°ê¸°ì™€ ì½ê¸°ë¥¼ ë‚˜ëˆ ìœ¼ë©´, ì„œë¹„ìŠ¤ì—ì„œ DB ì½ê¸° ìœ„ì£¼ì˜ ì‘ì—…ì´ ë§ì€ ê²½ìš° Read Replica ë¥¼ ì—¬ëŸ¬ ê°œ ë§Œë“¤ì–´ì„œ ë¶€í•˜ë¥¼ ë¶„ì‚°í•  ìˆ˜ ìˆë‹¤.
- RR ì˜ ë³µì œë³¸ë“¤ì€ ê°™ì€ AZ ì— ìˆì„ ìˆ˜ë„ ìˆê³ , ë‹¤ë¥¸ AZ ì‹¬ì§€ì–´ ë‹¤ë¥¸ ë¦¬ì „ì— ì¡´ì¬í•  ìˆ˜ ìˆë‹¤
- RR ì€ ë©€í‹° AZ ì™€ëŠ” ë‹¬ë¦¬ ê°ê°ì˜ ë³µì œë³¸ ì¸ìŠ¤í„´ìŠ¤ì— DNS ê°€ ê°ê° ë¶€ì—¬ë˜ì–´ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.
- ì´ë ‡ê²Œ DB ë¥¼ ë³µì œí•˜ì—¬ ì½ê¸° ì“°ê¸°ì˜ íŠ¸ë˜í”½ì„ ë¶„ì‚°í•˜ëŠ” ê¸°ìˆ  â†’ ë°ì´í„°ë² ì´ìŠ¤ Replication
    - ì„œë²„ë¥¼ ì´ì¤‘í™”í•˜ë“¯ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ì¤‘í™” í•œë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.

### ë°ì´í„° Replication

- Replication
    - ë°±ì—…ê³¼ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ì„œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ ëŒ€ì˜ ì„œë²„ì— ë³µì œí•˜ëŠ” í–‰ìœ„
    - ì›ë³¸ ë°ì´í„° ìœ„ì¹˜í•˜ëŠ” ì„œë²„ â†’ ë§ˆìŠ¤í„°
    - ì›ë³¸ì„ ë³µì œí•œ ì„œë²„ â†’ ìŠ¬ë ˆì´ë¸Œ
- ì“°ê¸° ì‘ì—…ê°™ì€ ê²½ìš° ì €ì¥ëœ ë°ì´í„°ê°€ ë³€ê²½ë˜ë¯€ë¡œ, ë§Œì¼ ë³µì œëœ ì„œë²„ì— ì“°ê¸° ì‘ì—…ì„ ë§¡ê¸°ê²Œ ëœë‹¤ë©´ ë³µì œëœ ì„œë²„ë“¤ ê°„ì— ë™ì¼í•œ í˜•íƒœë¥¼ ìœ ì§€í•˜ëŠ”ë° ë§ì€ ë¹„ìš©ì´ ë“¦
  
    â†’ ê·¸ë˜ì„œ í•œëŒ€ì˜ ì„œë²„ì—ë§Œ ì“°ê¸° ì‘ì—…ì„ í•˜ê³ , ê·¸ ì„œë²„ì˜ ë°ì´í„°ë¥¼ ë³µì œí•´ì„œ ì—¬ëŸ¬ ëŒ€ì˜ ìŠ¬ë ˆì´ë¸Œ ì„œë²„ë¥¼ ë§Œë“  í›„ì— ìŠ¬ë ˆì´ë¸Œì—ì„œëŠ” ì½ê¸° ì‘ì—…ë§Œã…‡ë¥´ ìˆ˜í–‰í•˜ê²Œ êµ¬ì„±
    

## Read Replica VS Multi-AZ

### 1. ë³µì œì˜ ëª©ì 

- Multi-AZ ë³µì œ â†’ ì„œë¹„ìŠ¤ê°€ í•­ìƒ ê°€ë™í•´ì•¼ í•˜ëŠ” ê°€ìš©ì„±ì´ ëª©ì 
- Read Replica â†’ í¼í¬ë¨¼ìŠ¤ë¥¼ ìœ„í•œ ì„œë¹„ìŠ¤

### 2. ë³µêµ¬ ë°©ë²•

- Read Replica â†’ fail over(ìë™ë³µêµ¬) ë¶ˆê°€ëŠ¥
    - RDS Primary ê³ ì¥ â†’ ê´€ë¦¬ìê°€ ì§ì ‘ ìˆ˜ë™ìœ¼ë¡œ ì“°ê¸° DNSë¥¼ ë³µì œë³¸ì— ì—°ê²°í•´ ë³µêµ¬

### 3. ë³µì œ ë°ì´í„° ì¼ê´€ì„±

- Multi-AZ â†’ ì“°ê¸° ì‘ì—…ì„ ì‹¤ì‹œí•œ ì¦‰ì‹œ ìë™ìœ¼ë¡œ ì˜ˆë¹„ ì¸ìŠ¤í„´ìŠ¤ì— ë³µì œ, ë°ì´í„°ê°€ í•­ìƒ ì¼ì¹˜
- Read Replica â†’ ì“°ê¸° ì‘ì—…ì„ ì‹¤ì‹œí•˜ë©´ ì•½ê°„ì˜ ì‹œê°„ì°¨ë¥¼ ê°€ì§€ê³  ë°ì´í„°ê°€ ë³µì œ, ë°ì´í„°ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

> S3 ì—ì„œì˜ PUT ë™ì‘ê³¼ UPDATE/DELETE ë™ì‘ê°„ì˜ ë°ì´í„° ì¼ê´€ì„±, ìµœì¢… ì¼ê´€ì„±ê³¼ ê°™ì€ ì›ë¦¬
> 

## 3. RDS Multi Region

- ë‹¤ë¥¸ ë¦¬ì „ì— ì§€ì†ì ìœ¼ë¡œ ë™ê¸°í™” ì‹œí‚¤ëŠ” DB í´ëŸ¬ìŠ¤í„° ìƒì„± (Async ë³µì œ)
- ì˜ˆì‹œ
    - ìœ ëŸ½ êµ­ê°€ì— ì„œë¹„ìŠ¤ë¥¼ í•œë‹¤ê³  ê°€ì •
    - ì„œìš¸ì— ë§ˆìŠ¤í„° ë¦¬ì „ì„ ë‘ê³  ìœ ëŸ½ì— Read Replica ë¥¼ ë‘ë©´ ìœ ëŸ½ í˜„ì§€ì—ì„œ RR ë¡œ ì½ê¸° ë•Œë¬¸ì— latency(ì§€ì—°ì‹œê°„)ì´ ì¤„ì–´ë“ ë‹¤
    - ìš°ë¦¬ë‚˜ë¼ì—ì„œëŠ” ì½ê¸° ì „ìš© ë³µì œë³¸ì— ë°ì´í„° ë³µì œë§Œ í•´ì£¼ë©´ ëœë‹¤.
- RDS ë©€í‹° ë¦¬ì „ì€ ì£¼ë¡œ ë¡œì»¬ í¼í¬ë¨¼ìŠ¤ ë˜ëŠ” DR(disaster recovery) ì‹œë‚˜ë¦¬ì˜¤ë¡œ í™œìš©
    - ë¡œì»¬ í¼í¬ë¨¼ìŠ¤ : ê·¸ ì§€ì—­ì— ìˆëŠ” ì‚¬ëŒë“¤ì´ ë¹¨ë¦¬ ì½ì„ ìˆ˜ ìˆê²Œ í•´ì¤Œ
    - DR ì‹œë‚˜ë¦¬ì˜¤ : ë§Œì•½ ì„œìš¸ì— í­íƒ„ì´ í„°ì ¸ì„œ ë¦¬ì „ì´ fail ëœë‹¤ë©´ ë‹¤ë¥¸ ë¦¬ì „ì„ ë§ˆìŠ¤í„°ë¡œ ë§Œë“œëŠ” êµ¬ì„±
- ê° ë¦¬ì „ë³„ë¡œ ìë™ ë°±ì—… ê°€ëŠ¥
- ë¦¬ì „ë³„ë¡œ Multi-AZ ê°€ëŠ¥

ì¶œì²˜ :

[[AWS] ğŸ“š RDS ê°œë… & ì•„í‚¤í…ì³ ì •ë¦¬ [ì´ë¡ í¸]](https://inpa.tistory.com/entry/AWS-ğŸ“š-RDS-ê°œë…-ì•„í‚¤í…ì³-ì •ë¦¬-ì´ë¡ í¸)

# RDS ìƒì„± ë° ì—°ë™

1. íŒŒë¼ë¯¸í„° ê·¸ë£¹ ìƒì„± ë° ì„¤ì •
   
    ![image-20241107225002376]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107225002376.png)
    
    ![image-20241107224723341]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224723341.png)
    
    ![image-20241107224733466]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224733466.png)
    
    ![image-20241107224741334]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224741334.png)
    
2. RDS ìƒì„±
   
    ![image-20241107224817458]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224817458.png)
    
    ![image-20241107224823054]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224823054.png)
    
    ![image-20241107224643878]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224643878.png)
    
    ![image-20241107224831293]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224831293.png)
    
    ![image-20241107224656876]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224656876.png)
    
    ![image-20241107224838795]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224838795.png)
    
    ![image-20241107224848445]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224848445.png)
    
    ![image-20241107224708021]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224708021.png)
    
    ![image-20241107224858302]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224858302.png)
    
    ![image-20241107224905176]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224905176.png)
    
3. ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •
   
    **ì´ˆê¸°ìƒíƒœ**
    
    ![image-20241107224919018]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224919018.png)
    
    **RDS > ë‚´ê°€ ìƒì„±í•œ RDS ì¸ìŠ¤í„´ìŠ¤ > ë³´ì•ˆ > VPC ë³´ì•ˆ ê·¸ë£¹ ì„ íƒ**
    
    ![image-20241107224755913]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224755913.png)
    
    ![image-20241107224926701]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224926701.png)
    
4. DataGrip ìœ¼ë¡œ ì™¸ë¶€ì ‘ì† í•´ë³´ê¸°
   
    ![image-20241107224934866]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224934866.png)
    
5. SpringBoot ì—°ë™
   
    **build.gradle**
    
    ![image-20241107224942595]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224942595.png)
    
    **.gitignore**
    
    ![image-20241107224950115]({{site.url}}/assets/images/2024-08-13-niornear_project(8)/image-20241107224950115.png)
    
    **application-rds.properties**
    
    ```bash
    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
    spring.datasource.url=jdbc:mysql://{RDS ì—”ë“œí¬ì¸íŠ¸}:{3306ê³¼ ê°™ì€ í¬íŠ¸ë²ˆí˜¸}/{ì„¤ì •í•œ ì´ˆê¸° ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„}
    spring.datasource.username={RDS ì—ì„œ ì„¤ì •í•œ username} 
    spring.datasource.password={RDS ì—ì„œ ì„¤ì •í•œ password}
    
    spring.jpa.hibernate.ddl-auto=create
    spring.jpa.properties.hibernate.format_sql=true
    
    logging.level.org.hibernate.SQL=debug
    logging.level.org.hibernate.type.descriptor.sql=trace
    ```
    
    **ì‹¤í–‰**
    
6. DataGrip ì—ì„œ í™•ì¸
   
    `show databases;` ë¡œ ìƒì„±ë˜ì–´ ìˆëŠ” ë°ì´í„°ë² ì´ìŠ¤ë“¤ ì¡°íšŒ
    
    `use {ì„¤ì •í•œ ì´ˆê¸° ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„};` ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš© ì„¤ì •
    
    `show tables;` ë¡œ í…Œì´ë¸”ë“¤ ì˜ ìƒì„±ë˜ì—ˆëŠ”ì§€ ì¡°íšŒ
    

## ì‹¤ì œ ìš´ì˜ ëª©ì ì¼ ê²½ìš° RDS

[[AWS] ğŸ“š RDS ì‹¤ì „ êµ¬ì¶•í•˜ê¸° [Multi AZ / Read Replica]](https://inpa.tistory.com/entry/AWS-ğŸ“š-RDS-ì‹¤ì „-ì‚¬ìš©í•˜ê¸°-Multi-AZ-Read-Replica)

- ë‚´ ê°œì¸í”„ë¡œì íŠ¸ì— ì ìš©í•´ë³´ë©´ ì¢‹ì„ë“¯ ã…ã…(ìœ ë£Œë‹ˆê¹Œ..)